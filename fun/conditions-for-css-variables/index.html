<!DOCTYPE html>
<html lang="ru" class="Page Page_post Page_ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Условия для CSS-переменных</title>
    <link rel="alternate" type="application/atom+xml" title="Atom feed" href="http://feeds.feedburner.com/kizu">
    <link rel="alternate" hreflang="en" href="http://kizu.ru/en/fun/conditions-for-css-variables/">
    <link rel="alternate" hreflang="ru" href="http://kizu.ru/fun/conditions-for-css-variables/">
    <link rel="stylesheet" href="/s/style.css">
    <link rel="preload" href="/s/extras2.css" as="style" onload="this.rel='stylesheet'">
  </head>
  <body class="Page-Body">
    <header class="Page-Header">
      <div class="LiquidLayout">
        <div class="LiquidLayout-Content">
          <h1 class="Page-Title"><a href="/" class="Page-Title-Link">Роман Комаров</a>
          </h1>
          <ul class="Page-Languages">
            <li class="Page-Language"><a data-short="en" href="/en/fun/conditions-for-css-variables/" class="Page-Language-Link">in English</a>
            </li>
            <li data-short="ru" class="Page-Language is-current">по-русски
            </li>
          </ul>
        </div>
      </div>
    </header>
    <article role="main" class="Page-Content">
      <div class="LiquidLayout">
        <div class="Main LiquidLayout-Content">
          <header><h1 class="Heading" id="условия-для-css-переменных"><a class="Anchor" aria-hidden="true" href="#условия-для-css-переменных"></a><span class="ss01 hang-m">У</span>сло<span class="shy"></span>вия для <abbr>CSS</abbr>-пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ных</h1>
          </header>
<p>Я нач<span class="shy"></span>ну с того, что в спе<span class="shy"></span>ци<span class="shy"></span>фи<span class="shy"></span>ка<span class="shy"></span>ци<span class="shy"></span>ях <span class="Sidenote-Wrapper"><a class="Sidenote-Context" href="#not-those" id="not-those">нет ни<span class="shy"></span>че<span class="shy"></span>го</a><span class="Sidenote" role="note"><span class="Sidenote-Misc"> (</span>Хотя и есть мо<span class="shy"></span>дуль с на<span class="shy"></span>зва<span class="shy"></span>ни<span class="shy"></span>ем “<a href="https://www.w3.org/TR/css3-conditional/"><abbr>CSS</abbr> Con<span class="shy"></span>di<span class="shy"></span>tional Rules</a>”, не сто<span class="shy"></span>ит ожи<span class="shy"></span>дать, что он о <abbr>CSS</abbr>-пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ных<span class="nobr"> —</span><span class="thinsp"> </span>в нём толь<span class="shy"></span>ко вся<span class="shy"></span>кое про at-rules. И, кста<span class="shy"></span>ти, даже есть <a href="https://tabatkins.github.io/specs/css-when-else/">пред<span class="shy"></span>ло<span class="shy"></span>же<span class="shy"></span>ние</a> о @-пра<span class="shy"></span>ви<span class="shy"></span>лах <code>@when</code>/<code>@else</code>, ко<span class="shy"></span>то<span class="shy"></span>рые, опять же, ни<span class="shy"></span>ка<span class="shy"></span>ко<span class="shy"></span>го от<span class="shy"></span>но<span class="shy"></span>ше<span class="shy"></span>ния к пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ным не име<span class="shy"></span>ют.<span class="Sidenote-Misc">)</span></span><a class="Sidenote-Close" href="#x" aria-hidden="true" role="presentation" tabindex="-1"></a></span> про усло<span class="shy"></span>вия для <a class="Link" href="https://www.w3.org/TR/css-variables-1/"><abbr>CSS</abbr>-пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ных</a>. Я ду<span class="shy"></span>маю, что это огром<span class="shy"></span>ное упу<span class="shy"></span>ще<span class="shy"></span>ние, так как, хотя пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ные уже предо<span class="shy"></span>став<span class="shy"></span>ля<span class="shy"></span>ют кучу ве<span class="shy"></span>щей, ко<span class="shy"></span>то<span class="shy"></span>рые невоз<span class="shy"></span>мож<span class="shy"></span>но до<span class="shy"></span>стичь ины<span class="shy"></span>ми сред<span class="shy"></span>ства<span class="shy"></span>ми, от<span class="shy"></span>сут<span class="shy"></span>ствие усло<span class="shy"></span>вий очень удру<span class="shy"></span>ча<span class="shy"></span>ет, так как их очень мно<span class="shy"></span>го для чего мож<span class="shy"></span>но было бы ис<span class="shy"></span>поль<span class="shy"></span>зовать.</p>
<p>Но что, если бы нам за<span class="shy"></span>хо<span class="shy"></span>те<span class="shy"></span>лось ис<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>вать эти во<span class="shy"></span>об<span class="shy"></span>ра<span class="shy"></span>жа<span class="shy"></span>е<span class="shy"></span>мые несу<span class="shy"></span>ще<span class="shy"></span>ству<span class="shy"></span>ю<span class="shy"></span>щие услов<span class="shy"></span>ные кон<span class="shy"></span>струк<span class="shy"></span>ции для пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ных уже <em>сей<span class="shy"></span>час</em>? Как и со мно<span class="shy"></span>же<span class="shy"></span>ством дру<span class="shy"></span>гих ве<span class="shy"></span>щей в <abbr>CSS</abbr>, в ка<span class="shy"></span><span class="nobr">ких-то</span> слу<span class="shy"></span>ча<span class="shy"></span>ях мы мо<span class="shy"></span>жем обой<span class="shy"></span>тись и ха<span class="shy"></span>ками.</p>
<h2 class="Heading" id="определение-проблемы"><a class="Anchor" aria-hidden="true" href="#определение-проблемы"></a><span class="ss01 hang-xs">О</span>пре<span class="shy"></span>де<span class="shy"></span>ле<span class="shy"></span>ние про<span class="shy"></span>блемы</h2>
<p>Итак, что нам нуж<span class="shy"></span>но: воз<span class="shy"></span>мож<span class="shy"></span>ность при по<span class="shy"></span>мо<span class="shy"></span>щи един<span class="shy"></span>ствен<span class="shy"></span>ной <abbr>CSS</abbr>-пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ной уметь за<span class="shy"></span>да<span class="shy"></span>вать <em>раз<span class="shy"></span>ные</em> зна<span class="shy"></span>че<span class="shy"></span>ния для раз<span class="shy"></span>ных <abbr>CSS</abbr>-свойств, при этом без того, что<span class="shy"></span>бы эти зна<span class="shy"></span>че<span class="shy"></span>ния были ос<span class="shy"></span>но<span class="shy"></span>ва<span class="shy"></span>ны на этой са<span class="shy"></span>мой пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ной (или дру<span class="shy"></span>ги<span class="shy"></span>ми сло<span class="shy"></span>ва<span class="shy"></span>ми<span class="nobr"> —</span><span class="thinsp"> </span>эти зна<span class="shy"></span>че<span class="shy"></span>ния не долж<span class="shy"></span>ны <em>вы<span class="shy"></span>чис<span class="shy"></span>лять<span class="shy"></span>ся</em> из на<span class="shy"></span>шей пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ной).</p>
<p>Нам нуж<span class="shy"></span>ны <strong>усло<span class="shy"></span>вия</strong>.</p>
<h2 class="Heading" id="использование-вычислений-для-бинарных-условий"><a class="Anchor" aria-hidden="true" href="#использование-вычислений-для-бинарных-условий"></a><span class="ss01 hang-m">И</span>споль<span class="shy"></span>зо<span class="shy"></span>ва<span class="shy"></span>ние вы<span class="shy"></span>чис<span class="shy"></span>ле<span class="shy"></span>ний для би<span class="shy"></span>нар<span class="shy"></span>ных условий</h2>
<p>Пе<span class="shy"></span>рей<span class="shy"></span>ду сра<span class="shy"></span>зу к делу и при<span class="shy"></span>ве<span class="shy"></span>ду схо<span class="shy"></span>ду ре<span class="shy"></span>ше<span class="shy"></span>ние, ко<span class="shy"></span>то<span class="shy"></span>рое уже поз<span class="shy"></span>же объ<span class="shy"></span>яс<span class="shy"></span>ню, мо<span class="shy"></span>же<span class="shy"></span>те сна<span class="shy"></span>ча<span class="shy"></span>ла по<span class="shy"></span>про<span class="shy"></span>бо<span class="shy"></span>вать сами по<span class="shy"></span>нять что тут как ра<span class="shy"></span>бо<span class="shy"></span>тает:</p>
<pre><code class="language-css">:root {
    --is-big: 0;
}

.is-big {
    --is-big: 1;
}

.block {
    padding: calc(
        25px * var(--is-big) +
        10px * (1 - var(--is-big))
    );
    bor<span class="shy"></span>der-width: calc(
        3px * var(--is-big) +
        1px * (1 - var(--is-big))
    );
}
</code></pre>
<p>В этом при<span class="shy"></span>ме<span class="shy"></span>ре мы за<span class="shy"></span>став<span class="shy"></span>ля<span class="shy"></span>ем все наши эле<span class="shy"></span>мен<span class="shy"></span>ты с <code>.block</code> по<span class="shy"></span>лу<span class="shy"></span>чать пад<span class="shy"></span>дин<span class="shy"></span>ги рав<span class="shy"></span>ные <code>10px</code> и ши<span class="shy"></span>ри<span class="shy"></span>ны гра<span class="shy"></span>ниц рав<span class="shy"></span>ные <code>1px</code>, до тех пор, пока зна<span class="shy"></span>че<span class="shy"></span>ние пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ной <code>--is-big</code> на этих эле<span class="shy"></span>мен<span class="shy"></span>тах не ста<span class="shy"></span>нет рав<span class="shy"></span>ным <code>1</code>, и в этом слу<span class="shy"></span>чае зна<span class="shy"></span>че<span class="shy"></span>ния ста<span class="shy"></span>нут <code>25px</code> и <code>3px</code> со<span class="shy"></span>от<span class="shy"></span>вет<span class="shy"></span>ственно.</p>
<p>Ме<span class="shy"></span>ха<span class="shy"></span>низм под всем этим до<span class="shy"></span>воль<span class="shy"></span>но про<span class="shy"></span>стой: мы ис<span class="shy"></span>поль<span class="shy"></span>зу<span class="shy"></span>ем оба воз<span class="shy"></span>мож<span class="shy"></span>ных зна<span class="shy"></span>че<span class="shy"></span>ния в еди<span class="shy"></span>ном вы<span class="shy"></span>чис<span class="shy"></span>ле<span class="shy"></span>нии, ис<span class="shy"></span>поль<span class="shy"></span>зуя <code>calc()</code>, где мы об<span class="shy"></span>ну<span class="shy"></span>ля<span class="shy"></span>ем одно зна<span class="shy"></span>че<span class="shy"></span>ние и остав<span class="shy"></span>ля<span class="shy"></span>ем дру<span class="shy"></span>гое в за<span class="shy"></span>ви<span class="shy"></span>си<span class="shy"></span>мо<span class="shy"></span>сти от на<span class="shy"></span>шей пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ной, ко<span class="shy"></span>то<span class="shy"></span>рая мо<span class="shy"></span>жет при<span class="shy"></span>ни<span class="shy"></span>мать одно из двух зна<span class="shy"></span>че<span class="shy"></span>ний: <code>1</code> или <code>0</code>. Ины<span class="shy"></span>ми сло<span class="shy"></span>ва<span class="shy"></span>ми, у нас там бу<span class="shy"></span>дет <code>25px * 1 + 10px * 0</code> в од<span class="shy"></span>ном слу<span class="shy"></span>чае и <code>25px * 0 + 10px * 1</code> в другом.</p>
<h2 class="Heading" id="более-сложные-условия"><a class="Anchor" aria-hidden="true" href="#более-сложные-условия"></a><span class="ss01 hang-m">Б</span>олее слож<span class="shy"></span>ные условия</h2>
<p>Мы мо<span class="shy"></span>жем ис<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>вать этот ме<span class="shy"></span>тод не толь<span class="shy"></span>ко для вы<span class="shy"></span>бо<span class="shy"></span>ра из двух воз<span class="shy"></span>мож<span class="shy"></span>ных зна<span class="shy"></span>че<span class="shy"></span>ний, но и для трёх или бо<span class="shy"></span>лее. Прав<span class="shy"></span>да, для каж<span class="shy"></span>до<span class="shy"></span>го но<span class="shy"></span>во<span class="shy"></span>го зна<span class="shy"></span>че<span class="shy"></span>ния слож<span class="shy"></span>ность вы<span class="shy"></span>чис<span class="shy"></span>ле<span class="shy"></span>ния уве<span class="shy"></span>ли<span class="shy"></span>чи<span class="shy"></span>ва<span class="shy"></span>ет<span class="shy"></span>ся. Так, для трёх воз<span class="shy"></span>мож<span class="shy"></span>ных зна<span class="shy"></span>че<span class="shy"></span>ний, вы<span class="shy"></span>чис<span class="shy"></span>ле<span class="shy"></span>ние ста<span class="shy"></span>нет уже таким:</p>
<pre><code class="language-css">.block {
    padding: calc(
        100px * (1 - var(--foo)) * (2 - var(--foo)) * 0.5 +
         20px * var(--foo) * (2 - var(--foo)) +
          3px * var(--foo) * (1 - var(--foo)) * -0.5
    );
}
</code></pre>
<p>Тут это вы<span class="shy"></span>чис<span class="shy"></span>ле<span class="shy"></span>ние при<span class="shy"></span>ни<span class="shy"></span>ма<span class="shy"></span>ет три воз<span class="shy"></span>мож<span class="shy"></span>ных зна<span class="shy"></span>че<span class="shy"></span>ния для пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ной <code>--foo</code><span class="nobr"> —</span><span class="thinsp"> </span><code>0</code>, <code>1</code> и <code>2</code>, и вы<span class="shy"></span>чис<span class="shy"></span>ля<span class="shy"></span>ет пад<span class="shy"></span>динг рав<span class="shy"></span>ный <code>100px</code>, <code>20px</code> или <code>3px</code> со<span class="shy"></span>от<span class="shy"></span>вет<span class="shy"></span>ственно.</p>
<p>Об<span class="shy"></span>щий прин<span class="shy"></span>цип тот же: нам нуж<span class="shy"></span>но каж<span class="shy"></span>дый воз<span class="shy"></span>мож<span class="shy"></span>ный ре<span class="shy"></span>зуль<span class="shy"></span>тат умно<span class="shy"></span>жить на вы<span class="shy"></span>ра<span class="shy"></span>же<span class="shy"></span>ние, да<span class="shy"></span>ю<span class="shy"></span>щее <code>1</code> для нуж<span class="shy"></span>но<span class="shy"></span>го зна<span class="shy"></span>че<span class="shy"></span>ния пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ной и <code>0</code> для осталь<span class="shy"></span>ных. И это вы<span class="shy"></span>ра<span class="shy"></span>же<span class="shy"></span>ние со<span class="shy"></span>став<span class="shy"></span>ля<span class="shy"></span>ет<span class="shy"></span>ся так же про<span class="shy"></span>сто: нам нуж<span class="shy"></span>но об<span class="shy"></span>ну<span class="shy"></span>лять каж<span class="shy"></span>дое иное воз<span class="shy"></span>мож<span class="shy"></span>ное зна<span class="shy"></span>че<span class="shy"></span>ние пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ной. По<span class="shy"></span>сле чего нам нуж<span class="shy"></span>но под<span class="shy"></span>ста<span class="shy"></span>вить то зна<span class="shy"></span>че<span class="shy"></span>ние, ко<span class="shy"></span>то<span class="shy"></span>рое долж<span class="shy"></span>но да<span class="shy"></span>вать <code>1</code> в по<span class="shy"></span>лу<span class="shy"></span>чив<span class="shy"></span>ше<span class="shy"></span>е<span class="shy"></span>ся вы<span class="shy"></span>ра<span class="shy"></span>же<span class="shy"></span>ние и до<span class="shy"></span>ба<span class="shy"></span>вить мно<span class="shy"></span>жи<span class="shy"></span>тель для того, что<span class="shy"></span>бы при<span class="shy"></span>ве<span class="shy"></span>сти-таки ре<span class="shy"></span>зуль<span class="shy"></span>тат к этой са<span class="shy"></span>мой еди<span class="shy"></span>нице.</p>
<h3 class="Heading" id="возможная-ловушка-в-спецификациях"><a class="Anchor" aria-hidden="true" href="#возможная-ловушка-в-спецификациях"></a><span class="ss01 hang-m">В</span>озмож<span class="shy"></span>ная ло<span class="shy"></span>вуш<span class="shy"></span>ка в спе<span class="shy"></span>ци<span class="shy"></span>фи<span class="shy"></span>ка<span class="shy"></span>циях</h3>
<p>С уве<span class="shy"></span>ли<span class="shy"></span>че<span class="shy"></span>ни<span class="shy"></span>ем слож<span class="shy"></span>но<span class="shy"></span>сти вы<span class="shy"></span>чис<span class="shy"></span>ле<span class="shy"></span>ний по<span class="shy"></span>яв<span class="shy"></span>ля<span class="shy"></span>ет<span class="shy"></span>ся шанс, что они пе<span class="shy"></span>ре<span class="shy"></span>ста<span class="shy"></span>нут ра<span class="shy"></span>бо<span class="shy"></span>тать. По<span class="shy"></span>че<span class="shy"></span>му? В <a class="Link" href="https://drafts.csswg.org/css-values-3/#calc-syntax">спе<span class="shy"></span>ци<span class="shy"></span>фи<span class="shy"></span>ка<span class="shy"></span>ции</a> есть та<span class="shy"></span>кая вот за<span class="shy"></span>мет<span class="shy"></span>ка (в моём пе<span class="shy"></span>ре<span class="shy"></span>во<span class="shy"></span>де):</p>
<blockquote>
<p>Бра<span class="shy"></span>у<span class="shy"></span>зе<span class="shy"></span>ры долж<span class="shy"></span>ны под<span class="shy"></span>дер<span class="shy"></span>жи<span class="shy"></span>вать <code>calc()</code>-вы<span class="shy"></span>ра<span class="shy"></span>же<span class="shy"></span>ния, со<span class="shy"></span>сто<span class="shy"></span>я<span class="shy"></span>щие как ми<span class="shy"></span>ни<span class="shy"></span>мум из 20 тер<span class="shy"></span>ми<span class="shy"></span>нов, где каж<span class="shy"></span>дое <abbr>ЧИС</abbr><span class="shy"></span>ЛО, <abbr>РАЗ</abbr><span class="shy"></span><abbr>МЕР</abbr><span class="shy"></span><abbr>НОСТЬ</abbr> или <abbr>ПРО</abbr><span class="shy"></span><abbr>ЦЕНТ</abbr> яв<span class="shy"></span>ля<span class="shy"></span>ет<span class="shy"></span>ся тер<span class="shy"></span>ми<span class="shy"></span>ном. Если <code>calc()</code>- вы<span class="shy"></span>ра<span class="shy"></span>же<span class="shy"></span>ние со<span class="shy"></span>дер<span class="shy"></span>жит боль<span class="shy"></span>ше тер<span class="shy"></span>ми<span class="shy"></span>нов, чем под<span class="shy"></span>дер<span class="shy"></span>жи<span class="shy"></span>ва<span class="shy"></span>ет<span class="shy"></span>ся, та<span class="shy"></span>кое вы<span class="shy"></span>ра<span class="shy"></span>же<span class="shy"></span>ние долж<span class="shy"></span>но счи<span class="shy"></span>тать<span class="shy"></span>ся нева<span class="shy"></span>лидным.</p>
</blockquote>
<p>Ко<span class="shy"></span>неч<span class="shy"></span>но, я немно<span class="shy"></span>го по<span class="shy"></span>те<span class="shy"></span>сти<span class="shy"></span>ро<span class="shy"></span>вал это дело и не смог най<span class="shy"></span>ти по<span class="shy"></span>доб<span class="shy"></span>ных огра<span class="shy"></span>ни<span class="shy"></span>че<span class="shy"></span>ний в су<span class="shy"></span>ще<span class="shy"></span>ству<span class="shy"></span>ю<span class="shy"></span>щих бра<span class="shy"></span>у<span class="shy"></span>зе<span class="shy"></span>рах, но, так или ина<span class="shy"></span>че, есть шанс, что если вы на<span class="shy"></span>пи<span class="shy"></span>ше<span class="shy"></span>те до<span class="shy"></span>ста<span class="shy"></span>точ<span class="shy"></span>но слож<span class="shy"></span>ный код, то вы столк<span class="shy"></span>нё<span class="shy"></span>тесь с этим огра<span class="shy"></span>ни<span class="shy"></span>че<span class="shy"></span>ни<span class="shy"></span>ем, ну или ка<span class="shy"></span><span class="nobr">кие-то</span> бра<span class="shy"></span>у<span class="shy"></span>зе<span class="shy"></span>ры вполне мо<span class="shy"></span>гут его в бу<span class="shy"></span>ду<span class="shy"></span>щем до<span class="shy"></span>ба<span class="shy"></span>вить, так что будь<span class="shy"></span>те осто<span class="shy"></span>рожны.</p>
<h2 class="Heading" id="условия-для-цветов"><a class="Anchor" aria-hidden="true" href="#условия-для-цветов"></a><span class="ss01 hang-m">У</span>сло<span class="shy"></span>вия для цветов</h2>
<p>Как мож<span class="shy"></span>но уви<span class="shy"></span>деть, та<span class="shy"></span>кие вы<span class="shy"></span>чис<span class="shy"></span>ле<span class="shy"></span>ния мо<span class="shy"></span>гут ис<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>вать<span class="shy"></span>ся толь<span class="shy"></span>ко для тех ве<span class="shy"></span>щей, ко<span class="shy"></span>то<span class="shy"></span>рые вы мо<span class="shy"></span>же<span class="shy"></span>те <em>вы<span class="shy"></span>чис<span class="shy"></span>лить</em>, так что не по<span class="shy"></span>лу<span class="shy"></span>чит<span class="shy"></span>ся ис<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>вать это дело для пе<span class="shy"></span>ре<span class="shy"></span>клю<span class="shy"></span>че<span class="shy"></span>ния зна<span class="shy"></span>че<span class="shy"></span>ний свойств типа <code>dis<span class="shy"></span>play</code> и ана<span class="shy"></span>ло<span class="shy"></span>гич<span class="shy"></span>ных. Но что на<span class="shy"></span>счёт цве<span class="shy"></span>тов? На са<span class="shy"></span>мом деле, мы мо<span class="shy"></span>жем вы<span class="shy"></span>чис<span class="shy"></span>лять зна<span class="shy"></span>че<span class="shy"></span>ния от<span class="shy"></span>дель<span class="shy"></span>ных ком<span class="shy"></span>по<span class="shy"></span>нент цве<span class="shy"></span>та. К со<span class="shy"></span>жа<span class="shy"></span>ле<span class="shy"></span>нию, сей<span class="shy"></span>час это бу<span class="shy"></span>дет ра<span class="shy"></span>бо<span class="shy"></span>тать толь<span class="shy"></span>ко в веб<span class="shy"></span>ки<span class="shy"></span>тах и блин<span class="shy"></span>ках, а вот Fire<span class="shy"></span>fox <a class="Link" href="https://bugzilla.mozilla.org/show_bug.cgi?id=984021" title="Bugzilla ticket">пока не под<span class="shy"></span>дер<span class="shy"></span>жи<span class="shy"></span>ва<span class="shy"></span>ет</a> <code>calc()</code> внут<span class="shy"></span>ри <code>rgba()</code> или дру<span class="shy"></span>гих цве<span class="shy"></span>то<span class="shy"></span>вых функций.</p>
<p>Но ко<span class="shy"></span>гда та<span class="shy"></span>кая под<span class="shy"></span>держ<span class="shy"></span>ка по<span class="shy"></span>явит<span class="shy"></span>ся (ну или если вам за<span class="shy"></span>хо<span class="shy"></span>чет<span class="shy"></span>ся по<span class="shy"></span>экс<span class="shy"></span>пе<span class="shy"></span>ри<span class="shy"></span>мен<span class="shy"></span>ти<span class="shy"></span>ро<span class="shy"></span>вать над этим де<span class="shy"></span>лом там, где оно уже ра<span class="shy"></span>бо<span class="shy"></span>та<span class="shy"></span>ет), мы мо<span class="shy"></span>жем де<span class="shy"></span>лать вещи вро<span class="shy"></span>де этой:</p>
<pre><code class="language-css">:root {
    --is-red: 0;
}

.block {
    back<span class="shy"></span>ground: rgba(
        calc(
            255*var(--is-red) +
            0*(1 - var(--is-red))
            ),
        calc(
            0*var(--is-red) +
            255*(1 - var(--is-red))
            ),
        0, 1);
}
</code></pre>
<p>Тут у нас бу<span class="shy"></span>дет по умол<span class="shy"></span>ча<span class="shy"></span>нию зе<span class="shy"></span>лё<span class="shy"></span>ный цвет, и крас<span class="shy"></span>ный, если мы за<span class="shy"></span>да<span class="shy"></span>дим <code>--is-red</code> зна<span class="shy"></span>че<span class="shy"></span>ние <code>1</code> (сто<span class="shy"></span>ит от<span class="shy"></span>ме<span class="shy"></span>тить, что если ка<span class="shy"></span><span class="nobr">кой-то</span> ком<span class="shy"></span>по<span class="shy"></span>нент дол<span class="shy"></span>жен быть ну<span class="shy"></span>лём, то мы, оче<span class="shy"></span>вид<span class="shy"></span>но, мо<span class="shy"></span>жем про<span class="shy"></span>сто все его мно<span class="shy"></span>же<span class="shy"></span>те<span class="shy"></span>ли опу<span class="shy"></span>стить для бо<span class="shy"></span>лее ком<span class="shy"></span>пакт<span class="shy"></span>ной за<span class="shy"></span>пи<span class="shy"></span>си, но тут я их оста<span class="shy"></span>вил для луч<span class="shy"></span>ше<span class="shy"></span>го по<span class="shy"></span>ни<span class="shy"></span>ма<span class="shy"></span>ния ал<span class="shy"></span>го<span class="shy"></span>рит<span class="shy"></span>ма).</p>
<p>И, так как мы мо<span class="shy"></span>жем вы<span class="shy"></span>чис<span class="shy"></span>лять лю<span class="shy"></span>бые ком<span class="shy"></span>по<span class="shy"></span>нен<span class="shy"></span>ты цве<span class="shy"></span>та, мы мо<span class="shy"></span>жем со<span class="shy"></span>зда<span class="shy"></span>вать для них наши услов<span class="shy"></span>ные вы<span class="shy"></span>чис<span class="shy"></span>ле<span class="shy"></span>ния (и, воз<span class="shy"></span>мож<span class="shy"></span>но, смо<span class="shy"></span>жем де<span class="shy"></span>лать их даже для гра<span class="shy"></span>ди<span class="shy"></span>ен<span class="shy"></span>тов? Вам сто<span class="shy"></span>ит это по<span class="shy"></span>про<span class="shy"></span>бо<span class="shy"></span>вать!).</p>
<h3 class="Heading" id="очередная-ловушка-в-спецификациях"><a class="Anchor" aria-hidden="true" href="#очередная-ловушка-в-спецификациях"></a><span class="ss01 hang-xs">О</span>че<span class="shy"></span>ред<span class="shy"></span>ная ло<span class="shy"></span>вуш<span class="shy"></span>ка в спе<span class="shy"></span>ци<span class="shy"></span>фи<span class="shy"></span>ка<span class="shy"></span>циях</h3>
<p>Ко<span class="shy"></span>гда я те<span class="shy"></span>сти<span class="shy"></span>ро<span class="shy"></span>вал как ра<span class="shy"></span>бо<span class="shy"></span>та<span class="shy"></span>ют улов<span class="shy"></span>ные вы<span class="shy"></span>чис<span class="shy"></span>ле<span class="shy"></span>ния для цве<span class="shy"></span>тов, я на<span class="shy"></span>ткнул<span class="shy"></span>ся на очень, <em>очень</em> <span class="Sidenote-Wrapper"><a class="Sidenote-Context" href="#issue-resolved" id="issue-resolved">стран<span class="shy"></span>ное огра<span class="shy"></span>ни<span class="shy"></span>че<span class="shy"></span>ние в спе<span class="shy"></span>ци<span class="shy"></span>фи<span class="shy"></span>ки<span class="shy"></span>ци<span class="shy"></span>ях</a><span class="Sidenote" role="note"><span class="Sidenote-Misc"> (</span>Таб Ат<span class="shy"></span>кинс <a href="https://github.com/kizu/kizu.github.com/issues/186">рас<span class="shy"></span>ска<span class="shy"></span>зал</a> о том, что эта про<span class="shy"></span>бле<span class="shy"></span>ма с ком<span class="shy"></span>по<span class="shy"></span>нен<span class="shy"></span>та<span class="shy"></span>ми цве<span class="shy"></span>та была по<span class="shy"></span>прав<span class="shy"></span>ле<span class="shy"></span>на в спе<span class="shy"></span>ци<span class="shy"></span>фи<span class="shy"></span>ка<span class="shy"></span>ци<span class="shy"></span>ях (но ис<span class="shy"></span>прав<span class="shy"></span>ле<span class="shy"></span>ние ещё не под<span class="shy"></span>дер<span class="shy"></span>жа<span class="shy"></span>но бра<span class="shy"></span>у<span class="shy"></span>зе<span class="shy"></span>ра<span class="shy"></span>ми). Ура! Та<span class="shy"></span>к<span class="shy"></span>же он ска<span class="shy"></span>зал, что есть ещё ре<span class="shy"></span>ше<span class="shy"></span>ние<span class="nobr"> —</span><span class="thinsp"> </span>ис<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>вать внут<span class="shy"></span>ри <code>rgba</code> про<span class="shy"></span>цен<span class="shy"></span>ты, а я со<span class="shy"></span>вер<span class="shy"></span>шен<span class="shy"></span>но о та<span class="shy"></span>кой воз<span class="shy"></span>мож<span class="shy"></span>но<span class="shy"></span>сти за<span class="shy"></span>был, хаха.<span class="Sidenote-Misc">)</span></span><a class="Sidenote-Close" href="#x" aria-hidden="true" role="presentation" tabindex="-1"></a></span>. Огра<span class="shy"></span>ни<span class="shy"></span>че<span class="shy"></span>ние под на<span class="shy"></span>зва<span class="shy"></span>ни<span class="shy"></span>ем <a class="Link Link_wrapper" href="https://twitter.com/kizmarh/status/788504161864261632">«<span class="Link-Inner">про<span class="shy"></span>вер<span class="shy"></span>ка ти<span class="shy"></span>пов</span>»</a>. Те<span class="shy"></span>перь я её офи<span class="shy"></span>ци<span class="shy"></span>аль<span class="shy"></span>но нена<span class="shy"></span>ви<span class="shy"></span>жу. Что это огра<span class="shy"></span>ни<span class="shy"></span>че<span class="shy"></span>ние зна<span class="shy"></span>чит<span class="nobr"> —</span><span class="thinsp"> </span>если ваше свой<span class="shy"></span>ство при<span class="shy"></span>ни<span class="shy"></span>ма<span class="shy"></span>ет толь<span class="shy"></span>ко зна<span class="shy"></span>че<span class="shy"></span>ние с ти<span class="shy"></span>пом <code>&lt;in<span class="shy"></span>te<span class="shy"></span>ger&gt;</code>, то если у вас внут<span class="shy"></span>ри <code>calc()</code> бу<span class="shy"></span>дут дроб<span class="shy"></span>ные чис<span class="shy"></span>ла или лю<span class="shy"></span>бое де<span class="shy"></span>ле<span class="shy"></span>ние, то даже если в ре<span class="shy"></span>зуль<span class="shy"></span>та<span class="shy"></span>те бу<span class="shy"></span>дет га<span class="shy"></span>ран<span class="shy"></span>ти<span class="shy"></span>ро<span class="shy"></span>ва<span class="shy"></span>но це<span class="shy"></span>лое чис<span class="shy"></span>ло, то так на<span class="shy"></span>зы<span class="shy"></span>ва<span class="shy"></span>е<span class="shy"></span>мый «re<span class="shy"></span>solved type» бу<span class="shy"></span>дет не <code>&lt;in<span class="shy"></span>te<span class="shy"></span>ger&gt;</code>, а <code>&lt;num<span class="shy"></span>ber&gt;</code>, что, в свою оче<span class="shy"></span>редь, не даст этим свой<span class="shy"></span>ствам при<span class="shy"></span>ни<span class="shy"></span>мать это зна<span class="shy"></span>че<span class="shy"></span>ние как ва<span class="shy"></span>лид<span class="shy"></span>ное. А так как, если по<span class="shy"></span>смот<span class="shy"></span>реть выше, в на<span class="shy"></span>ших услов<span class="shy"></span>ных вы<span class="shy"></span>ра<span class="shy"></span>же<span class="shy"></span>ни<span class="shy"></span>ях с бо<span class="shy"></span>лее чем дву<span class="shy"></span>мя зна<span class="shy"></span>че<span class="shy"></span>ни<span class="shy"></span>я<span class="shy"></span>ми ока<span class="shy"></span>жут<span class="shy"></span>ся дроб<span class="shy"></span>ные мо<span class="shy"></span>ди<span class="shy"></span>фи<span class="shy"></span>ка<span class="shy"></span>то<span class="shy"></span>ры, то они сде<span class="shy"></span>ла<span class="shy"></span>ют наши вы<span class="shy"></span>чис<span class="shy"></span>ле<span class="shy"></span>ния нева<span class="shy"></span>лид<span class="shy"></span>ны<span class="shy"></span>ми, как для ком<span class="shy"></span>по<span class="shy"></span>нент цве<span class="shy"></span>та, так и для дру<span class="shy"></span>гих свойств, при<span class="shy"></span>ни<span class="shy"></span>ма<span class="shy"></span>ю<span class="shy"></span>щих толь<span class="shy"></span>ко <code>&lt;in<span class="shy"></span>te<span class="shy"></span>ger&gt;</code> (на<span class="shy"></span>при<span class="shy"></span>мер, <code>z-in<span class="shy"></span>dex</code>).</p>
<p>Вот та<span class="shy"></span>кое вы<span class="shy"></span>ра<span class="shy"></span>жение:</p>
<pre><code class="language-css">calc(255 * (1 - var(--bar)) * (var(--bar) - 2) * -0.5)
</code></pre>
<p>Не бу<span class="shy"></span>дет ва<span class="shy"></span>лид<span class="shy"></span>ным внут<span class="shy"></span>ри <code>rgba()</code>. Из<span class="shy"></span>на<span class="shy"></span>чаль<span class="shy"></span>но я даже ду<span class="shy"></span>мал, что та<span class="shy"></span>кое по<span class="shy"></span>ве<span class="shy"></span>де<span class="shy"></span>ние<span class="nobr"> —</span><span class="thinsp"> </span>баг, осо<span class="shy"></span>бен<span class="shy"></span>но учи<span class="shy"></span>ты<span class="shy"></span>вая, что цве<span class="shy"></span>то<span class="shy"></span>вые функ<span class="shy"></span>ции во<span class="shy"></span>об<span class="shy"></span>ще хо<span class="shy"></span>ро<span class="shy"></span>шо пе<span class="shy"></span>ре<span class="shy"></span>ва<span class="shy"></span>ри<span class="shy"></span>ва<span class="shy"></span>ют вся<span class="shy"></span>кие зна<span class="shy"></span>че<span class="shy"></span>ния, вы<span class="shy"></span>хо<span class="shy"></span>дя<span class="shy"></span>щие за ра<span class="shy"></span>зум<span class="shy"></span>ные гра<span class="shy"></span>ни<span class="shy"></span>цы (вы вполне мо<span class="shy"></span>же<span class="shy"></span>те на<span class="shy"></span>пи<span class="shy"></span>сать <code>rgba(9001, +9001, -9001, 42)</code> и это даст вам ва<span class="shy"></span>лид<span class="shy"></span>ный жёл<span class="shy"></span>тый цвет), но вот эта вот ти<span class="shy"></span>пи<span class="shy"></span>за<span class="shy"></span>ция ока<span class="shy"></span>зы<span class="shy"></span>ва<span class="shy"></span>ет<span class="shy"></span>ся слиш<span class="shy"></span>ком слож<span class="shy"></span>но пе<span class="shy"></span>ре<span class="shy"></span>ва<span class="shy"></span>ри<span class="shy"></span>ва<span class="shy"></span>е<span class="shy"></span>мой для бра<span class="shy"></span>у<span class="shy"></span>зеров.</p>
<h4 class="Heading" id="возможные-решения-"><a class="Anchor" aria-hidden="true" href="#возможные-решения-"></a><span class="ss01 hang-m">В</span>озмож<span class="shy"></span>ные ре<span class="shy"></span>шения?</h4>
<p>Есть одно до<span class="shy"></span>воль<span class="shy"></span>но да<span class="shy"></span>лё<span class="shy"></span>кое от иде<span class="shy"></span>а<span class="shy"></span>ла ре<span class="shy"></span>ше<span class="shy"></span>ние. Так как в на<span class="shy"></span>шем слу<span class="shy"></span>чае мы зна<span class="shy"></span>ем и же<span class="shy"></span>ла<span class="shy"></span>е<span class="shy"></span>мое зна<span class="shy"></span>че<span class="shy"></span>ние, и про<span class="shy"></span>блем<span class="shy"></span>ный мо<span class="shy"></span>ди<span class="shy"></span>фи<span class="shy"></span>ка<span class="shy"></span>тор с дро<span class="shy"></span>бью, то мы мо<span class="shy"></span>жем пред<span class="shy"></span>вы<span class="shy"></span>чис<span class="shy"></span>лить их вме<span class="shy"></span>сте и округ<span class="shy"></span>лить пе<span class="shy"></span>ред тем, как встав<span class="shy"></span>лять в <code>calc()</code>. Да, во мно<span class="shy"></span>гих слу<span class="shy"></span>ча<span class="shy"></span>ях по<span class="shy"></span>лу<span class="shy"></span>ча<span class="shy"></span>е<span class="shy"></span>мое зна<span class="shy"></span>че<span class="shy"></span>ние бу<span class="shy"></span>дет чуть от<span class="shy"></span>ли<span class="shy"></span>чать<span class="shy"></span>ся <span class="nobr">из-за</span> по<span class="shy"></span>те<span class="shy"></span>ри в точ<span class="shy"></span>но<span class="shy"></span>сти. Но это же луч<span class="shy"></span>ше, чем ни<span class="shy"></span>че<span class="shy"></span>го, ведь правда?</p>
<p>Хотя есть ещё одно ре<span class="shy"></span>ше<span class="shy"></span>ние, но ко<span class="shy"></span>то<span class="shy"></span>рое бу<span class="shy"></span>дет ра<span class="shy"></span>бо<span class="shy"></span>тать толь<span class="shy"></span>ко с цве<span class="shy"></span>та<span class="shy"></span>ми<span class="nobr"> —</span><span class="thinsp"> </span>мы мо<span class="shy"></span>жем ис<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>вать <code>hsla</code> вме<span class="shy"></span>сто <code>rgba</code>, так как в та<span class="shy"></span>ком слу<span class="shy"></span>чае внут<span class="shy"></span>ри бу<span class="shy"></span>дут не це<span class="shy"></span>лые чис<span class="shy"></span>ла, а то, что таки нор<span class="shy"></span>маль<span class="shy"></span>но пе<span class="shy"></span>ре<span class="shy"></span>жё<span class="shy"></span>вы<span class="shy"></span>ва<span class="shy"></span>ет <code>calc()</code>. Но да, для свойств вро<span class="shy"></span>де <code>z-in<span class="shy"></span>dex</code> это не про<span class="shy"></span>ка<span class="shy"></span>тит. И даже для цве<span class="shy"></span>тов всё рав<span class="shy"></span>но воз<span class="shy"></span>мож<span class="shy"></span>ны неболь<span class="shy"></span>шие по<span class="shy"></span>те<span class="shy"></span>ри в точ<span class="shy"></span>но<span class="shy"></span>сти если пе<span class="shy"></span>ре<span class="shy"></span>во<span class="shy"></span>дить для это<span class="shy"></span>го <code>rgb</code> в <code>hsl</code>. Но эти по<span class="shy"></span>те<span class="shy"></span>ри долж<span class="shy"></span>ны быть мень<span class="shy"></span>ше, чем в преды<span class="shy"></span>ду<span class="shy"></span>щем ре<span class="shy"></span>шении.</p>
<h2 class="Heading" id="препроцессинг"><a class="Anchor" aria-hidden="true" href="#препроцессинг"></a><span class="ss01 hang-m">П</span>ре<span class="shy"></span>про<span class="shy"></span>цессинг</h2>
<p>То<span class="shy"></span>гда как для би<span class="shy"></span>нар<span class="shy"></span>ных усло<span class="shy"></span>вий вполне ре<span class="shy"></span>аль<span class="shy"></span>но пи<span class="shy"></span>сать вы<span class="shy"></span>чис<span class="shy"></span>ле<span class="shy"></span>ния вруч<span class="shy"></span>ную, для бо<span class="shy"></span>лее слож<span class="shy"></span>ных слу<span class="shy"></span>ча<span class="shy"></span>ев, или в слу<span class="shy"></span>чае тех же цве<span class="shy"></span>тов, нам бы при<span class="shy"></span>го<span class="shy"></span>ди<span class="shy"></span>лись ин<span class="shy"></span>стру<span class="shy"></span>мен<span class="shy"></span>ты, ко<span class="shy"></span>то<span class="shy"></span>рые бы поз<span class="shy"></span>во<span class="shy"></span>ли<span class="shy"></span>ли де<span class="shy"></span>лать это всё ав<span class="shy"></span>то<span class="shy"></span>ма<span class="shy"></span>ти<span class="shy"></span>че<span class="shy"></span>ски. К сча<span class="shy"></span>стью, у нас есть для это<span class="shy"></span>го пре<span class="shy"></span>про<span class="shy"></span>цес<span class="shy"></span>соры.</p>
<p>Вот как я ре<span class="shy"></span>а<span class="shy"></span>ли<span class="shy"></span>зо<span class="shy"></span>вал это быст<span class="shy"></span>рень<span class="shy"></span>ко на <span class="Sidenote-Wrapper"><a class="Sidenote-Context" href="#pen" id="pen">Стай<span class="shy"></span>лу<span class="shy"></span>се</a><span class="Sidenote" role="note"><span class="Sidenote-Misc"> (</span>Мож<span class="shy"></span>но по<span class="shy"></span>смот<span class="shy"></span>реть на этот же код <a href="http://codepen.io/kizu/pen/zKmyvG">на Code<span class="shy"></span>Pen</a> in ac<span class="shy"></span>tion.<span class="Sidenote-Misc">)</span></span><a class="Sidenote-Close" href="#x" aria-hidden="true" role="presentation" tabindex="-1"></a></span>:</p>
<pre><code class="language-styl">con<span class="shy"></span>di<span class="shy"></span>tional($var, $val<span class="shy"></span>ues...)
  $re<span class="shy"></span>sult = &#39;&#39;

  // If there is only an ar<span class="shy"></span>ray passed, use its con<span class="shy"></span>tents
  if length($val<span class="shy"></span>ues) == 1
    $val<span class="shy"></span>ues = $val<span class="shy"></span>ues[0]

  // Val<span class="shy"></span>i<span class="shy"></span>dat<span class="shy"></span>ing the val<span class="shy"></span>ues and check if we need to do any<span class="shy"></span>thing at all
  $type = null
  $equal = true

  for $value, $i in $val<span class="shy"></span>ues
    if $i &gt; 0 and $value != $val<span class="shy"></span>ues[0]
      $equal = false

    $val<span class="shy"></span>ue_<span class="shy"></span>type = typeof($value)
    $type = $type || $val<span class="shy"></span>ue_<span class="shy"></span>type
    if !($type == &#39;unit&#39; or $type == &#39;rgba&#39;)
      er<span class="shy"></span>ror(&#39;Con<span class="shy"></span>di<span class="shy"></span>tional func<span class="shy"></span>tion can ac<span class="shy"></span>cept only num<span class="shy"></span>bers or col<span class="shy"></span>ors&#39;)

    if $type != $val<span class="shy"></span>ue_<span class="shy"></span>type
      er<span class="shy"></span>ror(&#39;Con<span class="shy"></span>di<span class="shy"></span>tional func<span class="shy"></span>tion can ac<span class="shy"></span>cept only same type val<span class="shy"></span>ues&#39;)

  // If all the val<span class="shy"></span>ues are equal, just re<span class="shy"></span>turn one of them
  if $equal
    re<span class="shy"></span>turn $val<span class="shy"></span>ues[0]

  // Han<span class="shy"></span>dling num<span class="shy"></span>bers
  if $type == &#39;unit&#39;
    $re<span class="shy"></span>sult = &#39;calc(&#39;
    $i_<span class="shy"></span>count = 0
    for $value, $i in $val<span class="shy"></span>ues
      $mul<span class="shy"></span>ti<span class="shy"></span>plier = &#39;&#39;
      $mod<span class="shy"></span>i<span class="shy"></span>fier = 1
      $j_<span class="shy"></span>count = 0
      for $j in 0..(length($val<span class="shy"></span>ues) - 1)
        if $j != $i
          $j_<span class="shy"></span>count = $j_<span class="shy"></span>count + 1
          // We could use just the gen<span class="shy"></span>eral mul<span class="shy"></span>ti<span class="shy"></span>plier,
          // but for 0 and 1 we can sim<span class="shy"></span>plify it a bit.
          if $j == 0
            $mod<span class="shy"></span>i<span class="shy"></span>fier = $mod<span class="shy"></span>i<span class="shy"></span>fier * $i
            $mul<span class="shy"></span>ti<span class="shy"></span>plier = $mul<span class="shy"></span>ti<span class="shy"></span>plier + $var
          else if $j == 1
            $mod<span class="shy"></span>i<span class="shy"></span>fier = $mod<span class="shy"></span>i<span class="shy"></span>fier * ($j - $i)
            $mul<span class="shy"></span>ti<span class="shy"></span>plier = $mul<span class="shy"></span>ti<span class="shy"></span>plier + &#39;(1 - &#39; + $var + &#39;)&#39;
          else
            $mod<span class="shy"></span>i<span class="shy"></span>fier = $mod<span class="shy"></span>i<span class="shy"></span>fier * ($i - $j)
            $mul<span class="shy"></span>ti<span class="shy"></span>plier = $mul<span class="shy"></span>ti<span class="shy"></span>plier + &#39;(&#39; + $var + &#39; - &#39; + $j + &#39;)&#39;

          if $j_<span class="shy"></span>count &lt; length($val<span class="shy"></span>ues) - 1
            $mul<span class="shy"></span>ti<span class="shy"></span>plier = $mul<span class="shy"></span>ti<span class="shy"></span>plier + &#39; * &#39;

      // If value is zero, just don&#39;t add it there lol
      if $value != 0
        if $mod<span class="shy"></span>i<span class="shy"></span>fier != 1
          $mul<span class="shy"></span>ti<span class="shy"></span>plier = $mul<span class="shy"></span>ti<span class="shy"></span>plier + &#39; * &#39; + (1 / $mod<span class="shy"></span>i<span class="shy"></span>fier)
        $re<span class="shy"></span>sult = $re<span class="shy"></span>sult + ($i_<span class="shy"></span>count &gt; 0 ? &#39; + &#39; : &#39;&#39;) + $value + &#39; * &#39; + $mul<span class="shy"></span>ti<span class="shy"></span>plier
        $i_<span class="shy"></span>count = $i_<span class="shy"></span>count + 1

    $re<span class="shy"></span>sult = $re<span class="shy"></span>sult + &#39;)&#39;

  // Han<span class="shy"></span>dling col<span class="shy"></span>ors
  if $type == &#39;rgba&#39;
    $hues = ()
    $sat<span class="shy"></span>u<span class="shy"></span>ra<span class="shy"></span>tions = ()
    $light<span class="shy"></span>nesses = ()
    $al<span class="shy"></span>phas = ()

    for $value in $val<span class="shy"></span>ues
      push($hues, unit(hue($value), &#39;&#39;))
      push($sat<span class="shy"></span>u<span class="shy"></span>ra<span class="shy"></span>tions, sat<span class="shy"></span>u<span class="shy"></span>ra<span class="shy"></span>tion($value))
      push($light<span class="shy"></span>nesses, light<span class="shy"></span>ness($value))
      push($al<span class="shy"></span>phas, al<span class="shy"></span>pha($value))

    $re<span class="shy"></span>sult = &#39;hsla(&#39; + con<span class="shy"></span>di<span class="shy"></span>tional($var, $hues) + &#39;, &#39; + con<span class="shy"></span>di<span class="shy"></span>tional($var, $sat<span class="shy"></span>u<span class="shy"></span>ra<span class="shy"></span>tions) + &#39;, &#39; + con<span class="shy"></span>di<span class="shy"></span>tional($var, $light<span class="shy"></span>nesses) + &#39;, &#39; + con<span class="shy"></span>di<span class="shy"></span>tional($var, $al<span class="shy"></span>phas) +  &#39;)&#39;

  re<span class="shy"></span>turn un<span class="shy"></span>quote($re<span class="shy"></span>sult)
</code></pre>
<p>Да, кода до<span class="shy"></span>воль<span class="shy"></span>но мно<span class="shy"></span>го, но этот мик<span class="shy"></span>син спо<span class="shy"></span>со<span class="shy"></span>бен ге<span class="shy"></span>не<span class="shy"></span>ри<span class="shy"></span>ро<span class="shy"></span>вать усло<span class="shy"></span>вия как для чи<span class="shy"></span>сел, так и для цве<span class="shy"></span>тов, и не толь<span class="shy"></span>ко для би<span class="shy"></span>нар<span class="shy"></span>ных усло<span class="shy"></span>вий, но и для лю<span class="shy"></span>бо<span class="shy"></span>го чис<span class="shy"></span>ла воз<span class="shy"></span>мож<span class="shy"></span>ных зна<span class="shy"></span>че<span class="shy"></span>ний в них.</p>
<p>Ис<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>ва<span class="shy"></span>ние мик<span class="shy"></span>си<span class="shy"></span>на очень простое:</p>
<pre><code class="language-styl">bor<span class="shy"></span>der-width: con<span class="shy"></span>di<span class="shy"></span>tional(var(--foo), 10px, 20px)
</code></pre>
<p>Пер<span class="shy"></span>вый ар<span class="shy"></span>гу<span class="shy"></span>мент<span class="nobr"> —</span><span class="thinsp"> </span>наша пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ная, вто<span class="shy"></span>рым ар<span class="shy"></span>гу<span class="shy"></span>мен<span class="shy"></span>том бу<span class="shy"></span>дет то зна<span class="shy"></span>че<span class="shy"></span>ние, ко<span class="shy"></span>то<span class="shy"></span>рое долж<span class="shy"></span>но при<span class="shy"></span>ме<span class="shy"></span>нять<span class="shy"></span>ся ко<span class="shy"></span>гда пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ная бу<span class="shy"></span>дет рав<span class="shy"></span>на <code>0</code>, тре<span class="shy"></span>тий ар<span class="shy"></span>гу<span class="shy"></span>мент<span class="nobr"> —</span><span class="thinsp"> </span><code>1</code>, и т.д.</p>
<p>Вы<span class="shy"></span>зов мик<span class="shy"></span>си<span class="shy"></span>на выше сге<span class="shy"></span>не<span class="shy"></span>рит вот та<span class="shy"></span>кое услов<span class="shy"></span>ное вы<span class="shy"></span>ра<span class="shy"></span>жение:</p>
<pre><code class="language-css">bor<span class="shy"></span>der-width: calc(10px * (1 - var(--foo)) + 20px * var(--foo));
</code></pre>
<p>А вот бо<span class="shy"></span>лее слож<span class="shy"></span>ный при<span class="shy"></span>мер с цве<span class="shy"></span>тами:</p>
<pre><code class="language-styl">color: con<span class="shy"></span>di<span class="shy"></span>tional(var(--bar), red, lime, re<span class="shy"></span>bec<span class="shy"></span>ca<span class="shy"></span>pur<span class="shy"></span>ple, or<span class="shy"></span>ange)
</code></pre>
<p>Он сге<span class="shy"></span>не<span class="shy"></span>рит то, что вы точ<span class="shy"></span>но не за<span class="shy"></span>хо<span class="shy"></span>ти<span class="shy"></span>те пи<span class="shy"></span>сать вручную:</p>
<pre><code class="language-css">color: hsla(calc(120 * var(--bar) * (var(--bar) - 2) * (var(--bar) - 3) * 0.5 + 270 * var(--bar) * (1 - var(--bar)) * (var(--bar) - 3) * 0.5 + 38.82352941176471 * var(--bar) * (1 - var(--bar)) * (var(--bar) - 2) * -0.16666666666666666), calc(100% * (1 - var(--bar)) * (var(--bar) - 2) * (var(--bar) - 3) * 0.16666666666666666 + 100% * var(--bar) * (var(--bar) - 2) * (var(--bar) - 3) * 0.5 + 49.99999999999999% * var(--bar) * (1 - var(--bar)) * (var(--bar) - 3) * 0.5 + 100% * var(--bar) * (1 - var(--bar)) * (var(--bar) - 2) * -0.16666666666666666), calc(50% * (1 - var(--bar)) * (var(--bar) - 2) * (var(--bar) - 3) * 0.16666666666666666 + 50% * var(--bar) * (var(--bar) - 2) * (var(--bar) - 3) * 0.5 + 40% * var(--bar) * (1 - var(--bar)) * (var(--bar) - 3) * 0.5 + 50% * var(--bar) * (1 - var(--bar)) * (var(--bar) - 2) * -0.16666666666666666), 1);
</code></pre>
<p>Сто<span class="shy"></span>ит от<span class="shy"></span>ме<span class="shy"></span>тить, что у меня в мик<span class="shy"></span>сине нет под<span class="shy"></span>держ<span class="shy"></span>ки тех мест, где при<span class="shy"></span>ни<span class="shy"></span>ма<span class="shy"></span>ют<span class="shy"></span>ся толь<span class="shy"></span>ко <code>&lt;in<span class="shy"></span>te<span class="shy"></span>ger&gt;</code>, так что он мо<span class="shy"></span>жет не ра<span class="shy"></span>бо<span class="shy"></span>тать для <code>z-in<span class="shy"></span>dex</code> и про<span class="shy"></span>чих. Но он уже кон<span class="shy"></span>вер<span class="shy"></span>ти<span class="shy"></span>ру<span class="shy"></span>ет цве<span class="shy"></span>та в <code>hsla()</code>, что<span class="shy"></span>бы с ними справ<span class="shy"></span>лять<span class="shy"></span>ся (хотя и это мож<span class="shy"></span>но до<span class="shy"></span>де<span class="shy"></span>лать так, что<span class="shy"></span>бы это про<span class="shy"></span>ис<span class="shy"></span>хо<span class="shy"></span>ди<span class="shy"></span>ло толь<span class="shy"></span>ко то<span class="shy"></span>гда ко<span class="shy"></span>гда нуж<span class="shy"></span>но, а не все<span class="shy"></span>гда). Дру<span class="shy"></span>гая вещь, ко<span class="shy"></span>то<span class="shy"></span>рую я не ре<span class="shy"></span>а<span class="shy"></span>ли<span class="shy"></span>зо<span class="shy"></span>вал (пока?) в этом мик<span class="shy"></span>сине<span class="nobr"> —</span><span class="thinsp"> </span>воз<span class="shy"></span>мож<span class="shy"></span>ность про<span class="shy"></span>ки<span class="shy"></span>ды<span class="shy"></span>вать в ка<span class="shy"></span>че<span class="shy"></span>стве зна<span class="shy"></span>че<span class="shy"></span>ний дру<span class="shy"></span>гие <abbr>CSS</abbr>-пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ные. Это вполне воз<span class="shy"></span>мож<span class="shy"></span>но для тех свойств, что при<span class="shy"></span>ни<span class="shy"></span>ма<span class="shy"></span>ют не <code>&lt;in<span class="shy"></span>te<span class="shy"></span>ger&gt;</code>, так как их мож<span class="shy"></span>но бу<span class="shy"></span>дет про<span class="shy"></span>сто под<span class="shy"></span>став<span class="shy"></span>лять в наши услов<span class="shy"></span>ные вы<span class="shy"></span>чис<span class="shy"></span>ле<span class="shy"></span>ния. Воз<span class="shy"></span>мож<span class="shy"></span>но, ко<span class="shy"></span><span class="nobr">гда-ни</span><span class="shy"></span>будь я и най<span class="shy"></span>ду вре<span class="shy"></span>мя что<span class="shy"></span>бы это до<span class="shy"></span>де<span class="shy"></span>лать. А пока мож<span class="shy"></span>но для про<span class="shy"></span>стых слу<span class="shy"></span>ча<span class="shy"></span>ев пи<span class="shy"></span>сать эти вы<span class="shy"></span>ра<span class="shy"></span>же<span class="shy"></span>ния вруч<span class="shy"></span>ную сле<span class="shy"></span>дуя ал<span class="shy"></span>го<span class="shy"></span>рит<span class="shy"></span>му, опи<span class="shy"></span>сан<span class="shy"></span>но<span class="shy"></span>му в этой статье.</p>
<h2 class="Heading" id="фолбеки"><a class="Anchor" aria-hidden="true" href="#фолбеки"></a><span class="ss01 hang-xs">Ф</span>ол<span class="shy"></span>беки</h2>
<p>Ко<span class="shy"></span>неч<span class="shy"></span>но, если вы дей<span class="shy"></span>стви<span class="shy"></span>тель<span class="shy"></span>но со<span class="shy"></span>би<span class="shy"></span>ра<span class="shy"></span>е<span class="shy"></span>тесь всё это дело ис<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>вать, вам по<span class="shy"></span>на<span class="shy"></span>до<span class="shy"></span>бит<span class="shy"></span>ся воз<span class="shy"></span>мож<span class="shy"></span>ность ис<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>вать фол<span class="shy"></span>бе<span class="shy"></span>ки. Для бра<span class="shy"></span>у<span class="shy"></span>зе<span class="shy"></span>ров, не под<span class="shy"></span>дер<span class="shy"></span>жи<span class="shy"></span>ва<span class="shy"></span>ю<span class="shy"></span>щих пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ные, это про<span class="shy"></span>сто<span class="nobr"> —</span><span class="thinsp"> </span>мож<span class="shy"></span>но опре<span class="shy"></span>де<span class="shy"></span>лять де<span class="shy"></span>кла<span class="shy"></span>ра<span class="shy"></span>цию с фол<span class="shy"></span>бе<span class="shy"></span>ком за<span class="shy"></span>ранее:</p>
<pre><code class="language-css">.block {
    padding: 100px; /* fall<span class="shy"></span>back */
    padding: calc(
        100px * ((1 - var(--foo)) * (2 - var(--foo)) / 2) +
         20px * (var(--foo) * (2 - var(--foo))) +
          3px * (var(--foo) * (1 - var(--foo)) / -2)
    );
}
</code></pre>
<p>Но вот ко<span class="shy"></span>гда дело до<span class="shy"></span>хо<span class="shy"></span>дит до цве<span class="shy"></span>тов, то по<span class="shy"></span>яв<span class="shy"></span>ля<span class="shy"></span>ет<span class="shy"></span>ся про<span class="shy"></span>бле<span class="shy"></span>ма: как толь<span class="shy"></span>ко по<span class="shy"></span>яв<span class="shy"></span>ля<span class="shy"></span>ют<span class="shy"></span>ся пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ные, то по фак<span class="shy"></span>ту (и это оче<span class="shy"></span>ред<span class="shy"></span>ное очень стран<span class="shy"></span>ное ме<span class="shy"></span>сто в спе<span class="shy"></span>ци<span class="shy"></span>фи<span class="shy"></span>ка<span class="shy"></span>ци<span class="shy"></span>ях), <em>тупо лю<span class="shy"></span>бая</em> де<span class="shy"></span>кла<span class="shy"></span>ра<span class="shy"></span>ция, в ко<span class="shy"></span>то<span class="shy"></span>рой есть <abbr>CSS</abbr>-пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ные, ока<span class="shy"></span>зы<span class="shy"></span>ва<span class="shy"></span>ет<span class="shy"></span>ся ва<span class="shy"></span>лид<span class="shy"></span>ной. А это зна<span class="shy"></span>чит, что не по<span class="shy"></span>лу<span class="shy"></span>чит<span class="shy"></span>ся ис<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>вать фол<span class="shy"></span>бек для чего-либо, где есть <abbr>CSS</abbr>-пе<span class="shy"></span>ре<span class="shy"></span>менные:</p>
<pre><code class="language-css">back<span class="shy"></span>ground: blue;
back<span class="shy"></span>ground: I 💩 CSS VAR(--I)ABLES;
</code></pre>
<p>Вот это вот<span class="nobr"> —</span><span class="thinsp"> </span>ва<span class="shy"></span>лид<span class="shy"></span>но со<span class="shy"></span>глас<span class="shy"></span>но спе<span class="shy"></span>ци<span class="shy"></span>фи<span class="shy"></span>ка<span class="shy"></span>ци<span class="shy"></span>ям, фон бу<span class="shy"></span>дет при<span class="shy"></span>ни<span class="shy"></span>мать своё <code>ini<span class="shy"></span>tial</code> зна<span class="shy"></span>че<span class="shy"></span>ние, а фол<span class="shy"></span>бек при<span class="shy"></span>ме<span class="shy"></span>нять<span class="shy"></span>ся не бу<span class="shy"></span>дет (даже если ну со<span class="shy"></span>вер<span class="shy"></span>шен<span class="shy"></span>но оче<span class="shy"></span>вид<span class="shy"></span>но, что осталь<span class="shy"></span>ные ча<span class="shy"></span>сти зна<span class="shy"></span>че<span class="shy"></span>ния ну уж точ<span class="shy"></span>но некор<span class="shy"></span>рект<span class="shy"></span>ны).</p>
<p>Так что, для того, что<span class="shy"></span>бы предо<span class="shy"></span>став<span class="shy"></span>лять фол<span class="shy"></span>бе<span class="shy"></span>ки в по<span class="shy"></span>доб<span class="shy"></span>ных слу<span class="shy"></span>ча<span class="shy"></span>ях, нам надо бу<span class="shy"></span>дет вос<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>вать<span class="shy"></span>ся обёрт<span class="shy"></span>кой с <code>@sup<span class="shy"></span>ports</code>, в ко<span class="shy"></span>то<span class="shy"></span>рой мы бу<span class="shy"></span>дем про<span class="shy"></span>ве<span class="shy"></span>рять под<span class="shy"></span>держ<span class="shy"></span>ку все<span class="shy"></span>го <strong>кро<span class="shy"></span>ме</strong> пе<span class="shy"></span>ре<span class="shy"></span>менных.</p>
<p>В на<span class="shy"></span>шем слу<span class="shy"></span>чае нам надо до<span class="shy"></span>ба<span class="shy"></span>вить та<span class="shy"></span>кую обёрт<span class="shy"></span>ку для Firefox:</p>
<pre><code class="language-css">.block {
    color: #f00;
}
@sup<span class="shy"></span>ports (color: rgb(0, calc(0), 0)) {
    .block {
        color: rgba(calc(255 * (1 - var(--foo))), calc(255 * var(--foo)), 0, 1);
  }
}
</code></pre>
<p>Тут мы те<span class="shy"></span>сти<span class="shy"></span>ру<span class="shy"></span>ем под<span class="shy"></span>держ<span class="shy"></span>ку вы<span class="shy"></span>чис<span class="shy"></span>ле<span class="shy"></span>ний внут<span class="shy"></span>ри цве<span class="shy"></span>то<span class="shy"></span>вых функ<span class="shy"></span>ций, по<span class="shy"></span>сле чего при<span class="shy"></span>ме<span class="shy"></span>ня<span class="shy"></span>ем услов<span class="shy"></span>ное вы<span class="shy"></span>чис<span class="shy"></span>ле<span class="shy"></span>ние для цве<span class="shy"></span>та внут<span class="shy"></span>ри этой про<span class="shy"></span>верки.</p>
<p>В прин<span class="shy"></span>ци<span class="shy"></span>пе, вполне воз<span class="shy"></span>мож<span class="shy"></span>но со<span class="shy"></span>зда<span class="shy"></span>вать та<span class="shy"></span>кие фол<span class="shy"></span>бе<span class="shy"></span>ки ав<span class="shy"></span>то<span class="shy"></span>ма<span class="shy"></span>ти<span class="shy"></span>че<span class="shy"></span>ски, но я бы не ре<span class="shy"></span>ко<span class="shy"></span>мен<span class="shy"></span>до<span class="shy"></span>вал ис<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>вать для это<span class="shy"></span>го пре<span class="shy"></span>про<span class="shy"></span>цес<span class="shy"></span>со<span class="shy"></span>ры<span class="nobr"> —</span><span class="thinsp"> </span>слож<span class="shy"></span>ность того, что для это<span class="shy"></span>го нуж<span class="shy"></span>но бу<span class="shy"></span>дет де<span class="shy"></span>лать уже пре<span class="shy"></span>вы<span class="shy"></span>ша<span class="shy"></span>ет воз<span class="shy"></span>мож<span class="shy"></span>но<span class="shy"></span>сти пре<span class="shy"></span>про<span class="shy"></span>цес<span class="shy"></span>соров.</p>
<h2 class="Heading" id="сценарии-использования"><a class="Anchor" aria-hidden="true" href="#сценарии-использования"></a><span class="ss02 hang-xs">С</span>це<span class="shy"></span>на<span class="shy"></span>рии ис<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>вания</h2>
<p>Я, прав<span class="shy"></span>да, не люб<span class="shy"></span>лю рас<span class="shy"></span>пи<span class="shy"></span>сы<span class="shy"></span>вать сце<span class="shy"></span>на<span class="shy"></span>рии ис<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>ва<span class="shy"></span>ния для ве<span class="shy"></span>щей, необ<span class="shy"></span>хо<span class="shy"></span>ди<span class="shy"></span>мость в ко<span class="shy"></span>то<span class="shy"></span>рых оче<span class="shy"></span>вид<span class="shy"></span>на. Так что я буду кра<span class="shy"></span>ток. И да, я опи<span class="shy"></span>шу сце<span class="shy"></span>на<span class="shy"></span>рии ис<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>ва<span class="shy"></span>ния усло<span class="shy"></span>вий не толь<span class="shy"></span>ко для пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ных, но и для вы<span class="shy"></span>чис<span class="shy"></span>ле<span class="shy"></span>ний с по<span class="shy"></span>мо<span class="shy"></span>щью <code>calc()</code>.</p>
<ul>
<li><p>Усло<span class="shy"></span>вия для <abbr>CSS</abbr>-пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ных мо<span class="shy"></span>гут быть иде<span class="shy"></span>аль<span class="shy"></span>ны для те<span class="shy"></span>ма<span class="shy"></span>ти<span class="shy"></span>за<span class="shy"></span>ции бло<span class="shy"></span>ков. С их по<span class="shy"></span>мо<span class="shy"></span>щью мож<span class="shy"></span>но иметь на<span class="shy"></span>бор про<span class="shy"></span>ну<span class="shy"></span>ме<span class="shy"></span>ро<span class="shy"></span>ван<span class="shy"></span>ных тем и по<span class="shy"></span>том при<span class="shy"></span>ме<span class="shy"></span>нять их к бло<span class="shy"></span>кам (и даже ко вло<span class="shy"></span>жен<span class="shy"></span>ным!) ис<span class="shy"></span>поль<span class="shy"></span>зуя толь<span class="shy"></span>ко одну <abbr>CSS</abbr>-пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ную типа <code>--block-vari<span class="shy"></span>ant: 1</code>. Это то, что невоз<span class="shy"></span>мож<span class="shy"></span>но сде<span class="shy"></span>лать <span class="nobr">чем-то</span> кро<span class="shy"></span>ме как пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ны<span class="shy"></span>ми, а если по<span class="shy"></span>явит<span class="shy"></span>ся необ<span class="shy"></span>хо<span class="shy"></span>ди<span class="shy"></span>мость за<span class="shy"></span>да<span class="shy"></span>вать для темы раз<span class="shy"></span>ные зна<span class="shy"></span>че<span class="shy"></span>ния для раз<span class="shy"></span>ных свойств, то без усло<span class="shy"></span>вий при<span class="shy"></span>ш<span class="shy"></span>лось бы за<span class="shy"></span>да<span class="shy"></span>вать це<span class="shy"></span>лый на<span class="shy"></span>бор раз<span class="shy"></span>ных пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ных каж<span class="shy"></span>дый раз ко<span class="shy"></span>гда хо<span class="shy"></span>чет<span class="shy"></span>ся при<span class="shy"></span>ме<span class="shy"></span>нить тему.</p>
</li>
<li><p>Ти<span class="shy"></span>по<span class="shy"></span>гра<span class="shy"></span>фи<span class="shy"></span>ка. Если бы была воз<span class="shy"></span>мож<span class="shy"></span>ность ис<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>вать срав<span class="shy"></span>не<span class="shy"></span>ния с <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code> и <code>&gt;=</code>, то мож<span class="shy"></span>но было бы со<span class="shy"></span>здать на<span class="shy"></span>бор «пра<span class="shy"></span>вил» для раз<span class="shy"></span>ных раз<span class="shy"></span>ме<span class="shy"></span>ров шриф<span class="shy"></span>та, что<span class="shy"></span>бы ав<span class="shy"></span>то<span class="shy"></span>ма<span class="shy"></span>ти<span class="shy"></span>че<span class="shy"></span>ски под<span class="shy"></span>би<span class="shy"></span>рать вы<span class="shy"></span>со<span class="shy"></span>ту стро<span class="shy"></span>ки, жир<span class="shy"></span>ность и дру<span class="shy"></span>гие свой<span class="shy"></span>ства шриф<span class="shy"></span>та в за<span class="shy"></span>ви<span class="shy"></span>си<span class="shy"></span>мо<span class="shy"></span>сти от ис<span class="shy"></span>ход<span class="shy"></span>но<span class="shy"></span>го раз<span class="shy"></span>ме<span class="shy"></span>ра. Это и сей<span class="shy"></span>час воз<span class="shy"></span>мож<span class="shy"></span>но, ко<span class="shy"></span>неч<span class="shy"></span>но, но не то<span class="shy"></span>гда, ко<span class="shy"></span>гда нуж<span class="shy"></span>но иметь «шаги» для раз<span class="shy"></span>ме<span class="shy"></span>ров, а не про<span class="shy"></span>сто зна<span class="shy"></span>че<span class="shy"></span>ния вы<span class="shy"></span>чис<span class="shy"></span>лен<span class="shy"></span>ные из <code>em</code>-ов.</p>
</li>
<li><p>Адап<span class="shy"></span>тив<span class="shy"></span>ный ди<span class="shy"></span>зайн. Ну, если бы были пол<span class="shy"></span>но<span class="shy"></span>цен<span class="shy"></span>ные усло<span class="shy"></span>вия для вы<span class="shy"></span>чис<span class="shy"></span>ле<span class="shy"></span>ний, то это было бы по<span class="shy"></span>чти что теми са<span class="shy"></span>мы<span class="shy"></span>ми «el<span class="shy"></span>e<span class="shy"></span>ment queries»<span class="nobr"> —</span><span class="thinsp"> </span>мож<span class="shy"></span>но было бы смот<span class="shy"></span>реть на <code>vw</code> или ши<span class="shy"></span>ри<span class="shy"></span>ну ро<span class="shy"></span>ди<span class="shy"></span>те<span class="shy"></span>лей и ре<span class="shy"></span>шать ка<span class="shy"></span>кие зна<span class="shy"></span>че<span class="shy"></span>ния при<span class="shy"></span>ме<span class="shy"></span>нять в ка<span class="shy"></span>ком случае.</p>
</li>
</ul>
<p>На<span class="shy"></span>вер<span class="shy"></span>ня<span class="shy"></span>ка есть и дру<span class="shy"></span>гие сце<span class="shy"></span>на<span class="shy"></span>рии ис<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>ва<span class="shy"></span>ния для усло<span class="shy"></span>вий, рас<span class="shy"></span>ска<span class="shy"></span>жи<span class="shy"></span>те если при<span class="shy"></span>ду<span class="shy"></span>ма<span class="shy"></span>е<span class="shy"></span>те! Я сам, уве<span class="shy"></span>рен, на<span class="shy"></span>ты<span class="shy"></span>кал<span class="shy"></span>ся на мно<span class="shy"></span>же<span class="shy"></span>ство из них, но, так как у меня очень пло<span class="shy"></span>хая па<span class="shy"></span>мять, то я не за<span class="shy"></span>по<span class="shy"></span>ми<span class="shy"></span>наю всё-всё, что я хочу де<span class="shy"></span>лать с <abbr>CSS</abbr>. По<span class="shy"></span>то<span class="shy"></span>му что я хочу де<span class="shy"></span>лать <em>всё</em>.</p>
<h2 class="Heading" id="будущее"><a class="Anchor" aria-hidden="true" href="#будущее"></a><span class="ss01 hang-m">Б</span>удущее</h2>
<p>Я бы очень хо<span class="shy"></span>тел уви<span class="shy"></span>деть усло<span class="shy"></span>вия для <abbr>CSS</abbr>-пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ных в спе<span class="shy"></span>ци<span class="shy"></span>фи<span class="shy"></span>ки<span class="shy"></span>ци<span class="shy"></span>ях <abbr>CSS</abbr>, так что<span class="shy"></span>бы нам не при<span class="shy"></span>хо<span class="shy"></span>ди<span class="shy"></span>лось при<span class="shy"></span>бе<span class="shy"></span>гать к ха<span class="shy"></span>кам и мы мог<span class="shy"></span>ли бы ис<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>вать усло<span class="shy"></span>вия и для невы<span class="shy"></span>чис<span class="shy"></span>ля<span class="shy"></span>е<span class="shy"></span>мых зна<span class="shy"></span>че<span class="shy"></span>ний. Ну и даже с ха<span class="shy"></span>ка<span class="shy"></span>ми пока невоз<span class="shy"></span>мож<span class="shy"></span>но ис<span class="shy"></span>поль<span class="shy"></span>зо<span class="shy"></span>вать усло<span class="shy"></span>вия кро<span class="shy"></span>ме как стро<span class="shy"></span>го<span class="shy"></span>го ра<span class="shy"></span>вен<span class="shy"></span>ства, так что ни<span class="shy"></span>ка<span class="shy"></span>ких нам «если пе<span class="shy"></span>ре<span class="shy"></span>мен<span class="shy"></span>ная боль<span class="shy"></span>ше, чем X» и по<span class="shy"></span>доб<span class="shy"></span>ных ве<span class="shy"></span>щей. Я не вижу при<span class="shy"></span>чин по<span class="shy"></span>че<span class="shy"></span>му в <abbr>CSS</abbr> нель<span class="shy"></span>зя до<span class="shy"></span>ба<span class="shy"></span>вить пол<span class="shy"></span>но<span class="shy"></span>цен<span class="shy"></span>ные усло<span class="shy"></span>вия, так что если вы зна<span class="shy"></span>ко<span class="shy"></span>мы с <span class="nobr">кем-то</span>, кто раз<span class="shy"></span>ра<span class="shy"></span>ба<span class="shy"></span>ты<span class="shy"></span>ва<span class="shy"></span>ет спе<span class="shy"></span>ци<span class="shy"></span>фи<span class="shy"></span>ка<span class="shy"></span>ции <abbr>CSS</abbr><span class="nobr"> —</span><span class="thinsp"> </span>вы им на<span class="shy"></span>мек<span class="shy"></span>ни<span class="shy"></span>те там. Я толь<span class="shy"></span>ко на<span class="shy"></span>де<span class="shy"></span>юсь, что нам не от<span class="shy"></span>ве<span class="shy"></span>тят <span class="nobr">что-то</span> вро<span class="shy"></span>де «про<span class="shy"></span>сто ис<span class="shy"></span>поль<span class="shy"></span>зуй<span class="shy"></span>те JS» и не ста<span class="shy"></span>нут де<span class="shy"></span>лать пред<span class="shy"></span>по<span class="shy"></span>ло<span class="shy"></span>же<span class="shy"></span>ния о том, по<span class="shy"></span>че<span class="shy"></span>му это в прин<span class="shy"></span>ци<span class="shy"></span>пе невоз<span class="shy"></span>мож<span class="shy"></span>но. Да вот же, оно уже воз<span class="shy"></span>мож<span class="shy"></span>но, пус<span class="shy"></span>кай и с ха<span class="shy"></span>ка<span class="shy"></span>ми. Не мо<span class="shy"></span>жет быть ни<span class="shy"></span>ка<span class="shy"></span>ких оправ<span class="shy"></span>даний.</p>

          <p class="Metadata Published">Опубликовано 
            <time datetime="2016-10-21">21 октября 2016 г.</time> в <a href="../" class="Link">Экспериментах</a>.
          </p>
          <aside class="Feedback">
            <p>Если вы заметили ошибку или хотите чем-то дополнить статью, вы всегда можете <a href="https://github.com/kizu/kizu.github.com/issues/new?title=%D0%9E%D1%82%D0%B7%D1%8B%D0%B2%20%D0%BD%D0%B0%20%C2%AB%D0%A3%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B4%D0%BB%D1%8F%20CSS-%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D1%85%C2%BB" class="Link">написать мне об этом</a>, или <a href="https://github.com/kizu/kizu.github.com/blob/source/src/documents/posts/2016-10-21-(fun)-conditions-for-css-variables/index.ru.md" class="Link">поправить статью прямо на Гитхабе</a>.
            </p>
          </aside>
        </div>
      </div>
    </article>
    <footer class="Page-Footer">
      <div class="LiquidLayout">
        <div class="LiquidLayout-Content">
          <nav class="PrevNext"><a href="/blog/styling-inline-code/" class="Link Link_wrapper Link_prev"><span class="Link-Inner">Оформление строчных блоков кода</span></a><a href="/blog/just-en/" class="Link Link_wrapper Link_next"><span class="Link-Inner">Только по-английски</span></a>
          </nav>
          <p role="contentinfo" class="Page-Copy"><a href="/" class="Link Link_wrapper">© 2016 <span class="Link-Inner">Роман Комаров</span>. </a><a href="https://twitter.com/ki_zu" class="Link Link_wrapper"><span class="Link-Inner">Читайте меня в твиттере</span>!</a>
          </p>
        </div>
      </div>
    </footer>
    <script>var supportsWoff2=function(A){if(!("FontFace"in A)||"function"!=typeof A.FontFace)return!1;var t=new FontFace("t",'url( "data:application/font-woff2;base64,d09GMgABAAAAAADcAAoAAAAAAggAAACWAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABk4ALAoUNAE2AiQDCAsGAAQgBSAHIBtvAcieB3aD8wURQ+TZazbRE9HvF5vde4KCYGhiCgq/NKPF0i6UIsZynbP+Xi9Ng+XLbNlmNz/xIBBqq61FIQRJhC/+QA/08PJQJ3sK5TZFMlWzC/iK5GUN40psgqvxwBjBOg6JUSJ7ewyKE2AAaXZrfUB4v+hze37ugJ9d+DeYqiDwVgCawviwVFGnuttkLqIMGivmDg" ) format( "woff2" )',{});return t.load()["catch"](function(){}),"loading"==t.status||"loaded"==t.status}(this),h=document.getElementsByTagName("head")[0],link=document.createElement("link");link.href="/s/extras"+(supportsWoff2?"2":"")+".css",link.type="text/css",link.rel="stylesheet",h.appendChild(link);
    </script>
    <script src="/j/prism.js"></script>
    <script src="//mc.yandex.ru/metrika/watch.js"></script>
    <script type="text/javascript">
      //<![CDATA[
      (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter632758 = new Ya.Metrika({id:632758, clickmap:true, trackLinks:true, trackHash:true, webvisor:true}); } catch(e) {} }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f); } else { f(); } })(document, window, "yandex_metrika_callbacks");
      //]]>
    </script>
    <noscript><img src="//mc.yandex.ru/watch/632758" style="position:absolute; left:-9990px;" alt=""></noscript>
  </body>
</html>