<!DOCTYPE html>
<html lang="ru" class="Page Page_post Page_ru without-sidebar">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Повёрнутый текст</title>
    <link rel="alternate" type="application/atom+xml" title="Atom feed" href="http://feeds.feedburner.com/kizu">
    <link rel="alternate" hreflang="en" href="http://kizu.ru/en/fun/rotated-text/">
    <link rel="alternate" hreflang="ru" href="http://kizu.ru/fun/rotated-text/">
    <link rel="stylesheet" href="/s/style.css">
    <link rel="preload" href="/s/extras2.css" as="style" onload="this.rel='stylesheet'">
  </head>
  <body class="Page-Body">
    <header class="Page-Header">
      <div class="LiquidLayout">
        <div class="LiquidLayout-Content">
          <h1 class="Page-Title"><a href="/" class="Page-Title-Link">Роман Комаров</a>
          </h1>
          <ul class="Page-Languages">
            <li class="Page-Language"><a data-short="en" href="/en/fun/rotated-text/" class="Page-Language-Link">in English</a>
            </li>
            <li data-short="ru" class="Page-Language is-current">по-русски
            </li>
          </ul>
        </div>
      </div>
    </header>
    <article role="main" class="Page-Content">
      <div class="LiquidLayout">
        <div class="Main LiquidLayout-Content">
          <header><h1 class="Heading" id="пов-рнутый-текст"><a class="Anchor" aria-hidden="true" href="#пов-рнутый-текст"></a><span class="ss01 hang-m">П</span>овёрнутый текст</h1>
          </header>
<p>Неко­то­рое вре­мя на­зад я уже де­лил­ся этим ре­ше­ни­ем в твит­те­ре, но на этот раз хочу на­пи­сать о нём немно­го по­дробнее.</p>
<p><strong>За­да­ча</strong>: по­лу­чить по­вёр­ну­тый на 90 гра­ду­сов текст.</p>
<p><strong>Про­бле­ма</strong>: ши­ро­ко из­вест­но, что при ис­поль­зо­ва­нии <code>trans­form</code>, блок ве­дёт себя ана­ло­гич­но сдви­гу че­рез <code>po­si­tion:rel­a­tive</code><span class="nobr"> —</span><span class="thinsp"> </span>про­дол­жа­ет за­ни­мать ме­сто в по­то­ке по со­сто­я­нию до транс­фор­ма­ции, так что, по фак­ту, из­ме­не­ние про­ис­хо­дит толь­ко ви­зу­альное.</p>
<p>Од­на­ко, до­воль­но ча­сто мож­но за­хо­теть по­вер­нуть блок так, что­бы этот по­во­рот вли­ял и на по­ток. На­при­мер, если мы за­хо­тим вы­стро­ить несколь­ко вер­ти­каль­ных бло­ков в ряд, по­доб­но кни­гам на пол­ке, или если мы за­хо­тим ис­поль­зо­вать по­вёр­ну­тый текст в ка­че­стве за­го­лов­ков таб­ли­цы<span class="nobr"> —</span><span class="thinsp"> </span>в этих слу­ча­ях нам нуж­но бу­дет га­ран­ти­ро­вать, что вы­со­та ста­нет рав­на ши­рине бло­ка, в то вре­мя как ши­ри­на<span class="nobr"> —</span><span class="thinsp"> </span>вы­соте.</p>
<p>У меня по­лу­чи­лось ре­шить эту за­да­чу с од­ним до­пу­ще­ни­ем: нуж­но знать вы­со­ту по­во­ра­чи­ва­е­мо­го эле­мен­та. В этом слу­чае ре­а­ли­за­ция ста­но­вит­ся очень простой:</p>
<ol>
<li><p>Нам по­на­до­бит­ся до­пол­ни­тель­ный эле­мент. <abbr>HTML</abbr> каж­до­го бло­ка бу­дет при­мер­но таким:</p>
<pre><code class="language-html"> &lt;span class=&quot;rotated-text&quot;&gt;
     &lt;span class=&quot;rotated-text__inner&quot;&gt;
         Rotated foo
     &lt;/span&gt;
 &lt;/span&gt;
</code></pre>
</li>
<li><p>Врап­пе­ру мы за­да­ём вот та­кие сти­ли: </p>
<pre><code class="language-css"> .rotated-text {
     display: inline-block;
     overflow: hidden;

     width: 1.5em;
     line-height: 1.5;
 }
</code></pre>
<p> Здесь мы де­ла­ем эле­мент ин­лайн-блоч­ным (это не кри­тич­но, сра­бо­та­ло бы и блоч­ное отоб­ра­же­ние, но ин­лайн-блок чаще бы­ва­ет ну­жен), за­тем об­ре­за­ем все вы­сту­па­ю­щие ча­сти (при­го­дит­ся поз­же), да­лее за­да­ём ши­ри­ну, рав­ную те­ку­щей вы­со­те бло­ка,<span class="nobr"> —</span><span class="thinsp"> </span>то са­мое до­пу­ще­ние (<code>line-height</code> тут при­ве­дён в ка­че­стве при­ме­ра того, что сей­час опре­де­ля­ет вы­со­ту бло­ка, а так как все эле­мен­ты, ис­поль­зу­е­мые в при­ме­ре, од­но­строч­ные, то это и бу­дет его вы­со­той).</p>
</li>
<li><p>Внут­рен­ний эле­мент де­ла­ем ин­лайн-блоч­ным, что­бы его ши­ри­на схлоп­ну­лась по кон­тен­ту. По­сле чего за­да­ём <code>white-space:nowrap</code> для того, что­бы ни­че­го ни­ку­да не пе­ре­но­си­лось (ведь выше мы огра­ни­чи­ли ши­ри­ну), ну и по­во­ра­чи­ва­ем блок, счи­тая верх­ний ле­вый угол точ­кой от­счё­та (для чи­та­е­мо­сти свой­ства при­ве­де­ны без пре­фик­сов):</p>
<pre><code class="language-css"> .rotated-text__inner {
     display: inline-block;
     white-space: nowrap;

     transform: translate(0,100%) rotate(-90deg);
     transform-origin: 0 0;
 }
</code></pre>
</li>
<li><p>А те­перь са­мое глав­ное: нам нуж­но сде­лать этот внут­рен­ний эле­мент «квад­рат­ным»<span class="nobr"> —</span><span class="thinsp"> </span>это сде­ла­ет вы­со­ту ко­неч­но­го эле­мен­та рав­ной ши­рине, ну а ши­ри­на у нас об­ре­за­ет­ся врап­пе­ром. Для того, что­бы сде­лать наш эле­мент квад­рат­ным, я при­ме­няю вот та­кой вот трюк:</p>
<pre><code class="language-css"> .rotated-text__inner:after {
     content: &quot;&quot;;
     float: left;
     margin-top: 100%;
 }
</code></pre>
<p> Вро­де всё до­воль­но про­сто, но немно­гие зна­ют о том, что вер­ти­каль­ные ма­джи­ны и пад­дин­ги, за­дан­ные в про­цен­тах, ис­чис­ля­ют­ся не от вы­со­ты бло­ка, а от его ши­ри­ны. Это по­ве­де­ние ред­ко ис­поль­зу­ет­ся на прак­ти­ке, но у нас как раз тот слу­чай, ко­гда оно при­го­дилось.</p>
</li>
</ol>
<p>В ито­ге мы по­лу­ча­ем квад­рат­ный эле­мент, об­ре­за­е­мый врап­пе­ром до ши­ри­ны сво­ей про­шлой вы­со­ты, та­кой эле­мент мож­но ис­поль­зо­вать в лю­бом кон­тек­сте, для него бу­дут ра­бо­тать раз­ные свой­ства вро­де <code>text-align</code> или <code>ver­ti­cal-align</code>, так что мож­но ска­зать, мы по­лу­чи­ли «чест­ный» по­вёр­ну­тый блок.</p>
<p>Ну и несколь­ко жи­вых при­меров:</p>
<h2 class="Heading" id="заголовки-таблиц"><a class="Anchor" aria-hidden="true" href="#заголовки-таблиц"></a><span class="ss01 hang-xs">З</span>аголовки таблиц</h2>
<p>Оче­вид­ный при­мер<span class="nobr"> —</span><span class="thinsp"> </span>ком­пакт­ные по ши­рине за­го­лов­ки таблиц.</p>
<div class="Demo Demo_injected Demo_seamless" id="Demo_rotated-text"><style>

.rotated-text {
    display: inline-block;
    overflow: hidden;
    width: 1.5em;
    line-height: 1.5;
}
.rotated-text__inner {
    display: inline-block;
    white-space: nowrap;
    -webkit-transform: translate(0,100%) rotate(-90deg);
       -moz-transform: translate(0,100%) rotate(-90deg);
        -ms-transform: translate(0,100%) rotate(-90deg);
         -o-transform: translate(0,100%) rotate(-90deg);
            transform: translate(0,100%) rotate(-90deg);
    -webkit-transform-origin: 0 0;
       -moz-transform-origin: 0 0;
        -ms-transform-origin: 0 0;
         -o-transform-origin: 0 0;
            transform-origin: 0 0;
}
/* This element stretches the parent to be square
   by using the mechanics of vertical margins  */
.rotated-text__inner:before {
    content: "";
    float: left;
    margin-top: 100%;
}

/* Just for better looking tables */
.table-example {
    display: inline-table;
    vertical-align: top;
    text-align: center;
}

</style>

<table class="table-example" border="1" cellpadding="10">
    <tr>
        <th>
            <span class="rotated-text">
                <span class="rotated-text__inner">
                    First th
                </span>
            </span>
        </th>
        <td>Some cell</td>
        <td>And another</td>
    </tr>
    <tr>
        <th>
            <span class="rotated-text">
                <span class="rotated-text__inner">
                    Second th
                </span>
            </span>
        </th>
        <td>12</td>
        <td>12314</td>
    </tr>
    <tr>
        <th>
            <span class="rotated-text">
                <span class="rotated-text__inner">
                    Third th
                </span>
            </span>
        </th>
        <td>12</td>
        <td>12314</td>
    </tr>
</table>

<table class="table-example" border="1" cellpadding="10">
    <tr>
        <th>
            <span class="rotated-text">
                <span class="rotated-text__inner">
                    First th
                </span>
            </span>
        </th>
        <th>
            <span class="rotated-text">
                <span class="rotated-text__inner">
                    The Second th
                </span>
            </span>
        </th>
        <th>
            <span class="rotated-text">
                <span class="rotated-text__inner">
                    Third th
                </span>
            </span>
        </th>
    </tr>
    <tr>
        <td>2</td>
        <td>4</td>
        <td>42</td>
    </tr>
    <tr>
        <td>12</td>
        <td>4</td>
        <td>234</td>
    </tr>
    <tr>
        <td>13</td>
        <td>100</td>
        <td>0</td>
    </tr>
</table>
</div>
<h2 class="Heading" id="-книжная-полка-"><a class="Anchor" aria-hidden="true" href="#-книжная-полка-"></a><span class="ss01 hang-m">«</span>Книжная полка»</h2>
<p>Так как по­вёр­ну­тые бло­ки по­лу­ча­ют­ся «чест­ны­ми», то, если вы­стро­ить их в ряд, вы­со­та ряда бу­дет рав­на вы­со­те са­мо­го боль­ше­го из них:</p>
<div class="Demo Demo_injected Demo_seamless" id="Demo_rotated-text_books"><style>

.rotated-text {
    display: inline-block;
    overflow: hidden;
    width: 1.5em;
    line-height: 1.5;
}
.rotated-text__inner {
    display: inline-block;
    white-space: nowrap;
    -webkit-transform: translate(0,100%) rotate(-90deg);
       -moz-transform: translate(0,100%) rotate(-90deg);
        -ms-transform: translate(0,100%) rotate(-90deg);
         -o-transform: translate(0,100%) rotate(-90deg);
            transform: translate(0,100%) rotate(-90deg);
    -webkit-transform-origin: 0 0;
       -moz-transform-origin: 0 0;
        -ms-transform-origin: 0 0;
         -o-transform-origin: 0 0;
            transform-origin: 0 0;
}
/* This element stretches the parent to be square
   by using the mechanics of vertical margins  */
.rotated-text__inner:before {
    content: "";
    float: left;
    margin-top: 100%;
}

.bookshelf {
    padding: 0;
    margin: 0;
    font-size: 0.8em;
}

.book {
    padding: 1em 0.5em;

    vertical-align: bottom;
    list-style: none;

    -webkit-box-shadow: inset 0 0 0 1px #000;
            box-shadow: inset 0 0 0 1px #000;
}

.book:before {
    display: none;
}

.book__inner {
    text-decoration: none;
    vertical-align: middle;
    text-align: center;

    min-width: 8em;
    padding: 0;

    color: #000;
    text-shadow: none !important;
}

</style>

<ul class="bookshelf">
    <li class="book rotated-text"><a class="book__inner rotated-text__inner" href="#book">The Idiot</a></li>
    <li class="book rotated-text"><a class="book__inner rotated-text__inner" href="#book">The Little Prince</a></li>
    <li class="book rotated-text"><a class="book__inner rotated-text__inner" href="#book">Roadside Picnic</a></li>
    <li class="book rotated-text"><a class="book__inner rotated-text__inner" href="#book">Flowers for Algernon</a></li>
    <li class="book rotated-text"><a class="book__inner rotated-text__inner" href="#book">A Book of Five Rings</a></li>
    <li class="book rotated-text"><a class="book__inner rotated-text__inner" href="#book">The Glass Bead Game</a></li>
    <li class="book rotated-text" title="42!"><a class="book__inner rotated-text__inner" href="#book">The Hitchhiker's Guide to the Galaxy</a></li>
    <li class="book rotated-text"><a class="book__inner rotated-text__inner" href="#book">The Hobbit</a></li>
    <li class="book rotated-text"><a class="book__inner rotated-text__inner" href="#book">One Flew Over the Cuckoo's Nest</a></li>
    <li class="book rotated-text"><a class="book__inner rotated-text__inner" href="#book">1984</a></li>
    <li class="book rotated-text"><a class="book__inner rotated-text__inner" href="#book">Mother Night</a></li>
    <li class="book rotated-text"><a class="book__inner rotated-text__inner" href="#book">Speaker for the Dead</a></li>
    <li class="book rotated-text"><a class="book__inner rotated-text__inner" href="#book">The Day of the Triffids</a></li>
</ul>
</div>
<p><span class="nobr">Как-то</span> так.</p>
<p>Ещё раз: мы долж­ны знать вы­со­ту бло­ка, так что, если по­на­до­бит­ся по­во­ра­чи­вать та­ким об­ра­зом мно­го­строч­ные бло­ки, нуж­но бу­дет со­от­вет­ству­ю­щим об­ра­зом из­ме­нять ши­ри­ну их врап­перов.</p>
<p>Кро­ме того, воз­мож­но, этот ме­тод мож­но за­ста­вить ра­бо­тать и в IE<span class="nobr"> —</span><span class="thinsp"> </span>при­ме­нив мат­рич­ный фильтр для по­во­ро­та и до­ба­вив эле­мент в за­ме­ну псев­до­эле­мен­ту. Мне лень всё это де­лать, но если <span class="nobr">кто-то</span> это сде­ла­ет, я буду рад пулл-рек­ве­стам к <a class="Link" href="https://github.com/kizu/kizu.github.com/blob/master/demos/rotated-text.html">этим</a> <a class="Link" href="https://github.com/kizu/kizu.github.com/blob/master/demos/rotated-text_books.html">при­ме­рам</a> :)</p>

          <p class="Metadata Published">Опубликовано 
            <time datetime="2013-04-30">30 апреля 2013 г.</time> в <a href="../" class="Link">Экспериментах</a>.
          </p>
          <aside class="Feedback">
            <p>Если вы заметили ошибку или хотите чем-то дополнить статью, вы всегда можете <a href="https://github.com/kizu/kizu.github.com/issues/new?title=%D0%9E%D1%82%D0%B7%D1%8B%D0%B2%20%D0%BD%D0%B0%20%C2%AB%D0%9F%D0%BE%D0%B2%D1%91%D1%80%D0%BD%D1%83%D1%82%D1%8B%D0%B9%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%C2%BB" class="Link">написать мне об этом</a>, или <a href="https://github.com/kizu/kizu.github.com/blob/source/src/documents/posts/2013-04-30-(fun)-rotated-text/index.ru.md" class="Link">поправить статью прямо на Гитхабе</a>.
            </p>
          </aside>
        </div>
      </div>
    </article>
    <footer class="Page-Footer">
      <div class="LiquidLayout">
        <div class="LiquidLayout-Content">
          <nav class="PrevNext"><a href="/issues/markdowning-yaml/" class="Link Link_wrapper Link_prev"><span class="Link-Inner">Маркдауним YAML для Jekyll</span></a><a href="/blog/hello-blog/" class="Link Link_wrapper Link_next"><span class="Link-Inner">«Блог»</span></a>
          </nav>
          <p role="contentinfo" class="Page-Copy"><a href="/" class="Link Link_wrapper">© 2017 <span class="Link-Inner">Роман Комаров</span>. </a><a href="https://twitter.com/ki_zu" class="Link Link_wrapper"><span class="Link-Inner">Читайте меня в твиттере</span>!</a>
          </p>
        </div>
      </div>
    </footer>
    <script>var supportsWoff2=function(A){if(!("FontFace"in A)||"function"!=typeof A.FontFace)return!1;var t=new FontFace("t",'url( "data:application/font-woff2;base64,d09GMgABAAAAAADcAAoAAAAAAggAAACWAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABk4ALAoUNAE2AiQDCAsGAAQgBSAHIBtvAcieB3aD8wURQ+TZazbRE9HvF5vde4KCYGhiCgq/NKPF0i6UIsZynbP+Xi9Ng+XLbNlmNz/xIBBqq61FIQRJhC/+QA/08PJQJ3sK5TZFMlWzC/iK5GUN40psgqvxwBjBOg6JUSJ7ewyKE2AAaXZrfUB4v+hze37ugJ9d+DeYqiDwVgCawviwVFGnuttkLqIMGivmDg" ) format( "woff2" )',{});return t.load()["catch"](function(){}),"loading"==t.status||"loaded"==t.status}(this),h=document.getElementsByTagName("head")[0],link=document.createElement("link");link.href="/s/extras"+(supportsWoff2?"2":"")+".css",link.type="text/css",link.rel="stylesheet",h.appendChild(link);
    </script>
    <script src="/j/prism.js"></script>
    <script src="//mc.yandex.ru/metrika/watch.js"></script>
    <script type="text/javascript">
      //<![CDATA[
      (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter632758 = new Ya.Metrika({id:632758, clickmap:true, trackLinks:true, trackHash:true, webvisor:true}); } catch(e) {} }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f); } else { f(); } })(document, window, "yandex_metrika_callbacks");
      //]]>
    </script>
    <noscript><img src="//mc.yandex.ru/watch/632758" style="position:absolute; left:-9990px;" alt=""></noscript>
  </body>
</html>