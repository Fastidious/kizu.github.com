<!DOCTYPE html>
<html lang="ru" class="Page Page_post Page_ru without-sidebar">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Отображение в потоке</title>
    <link rel="alternate" type="application/atom+xml" title="Atom feed" href="http://feeds.feedburner.com/kizu">
    <link rel="alternate" hreflang="en" href="http://kizu.ru/en/fun/the-flow-of-display/">
    <link rel="alternate" hreflang="ru" href="http://kizu.ru/fun/the-flow-of-display/">
    <link rel="stylesheet" href="/s/style.css">
    <link rel="preload" href="/s/extras2.css" as="style" onload="this.rel='stylesheet'">
  </head>
  <body class="Page-Body">
    <header class="Page-Header">
      <div class="LiquidLayout">
        <div class="LiquidLayout-Content">
          <h1 class="Page-Title"><a href="/" class="Page-Title-Link">Роман Комаров</a>
          </h1>
          <ul class="Page-Languages">
            <li class="Page-Language"><a data-short="en" href="/en/fun/the-flow-of-display/" class="Page-Language-Link">in English</a>
            </li>
            <li data-short="ru" class="Page-Language is-current">по-русски
            </li>
          </ul>
        </div>
      </div>
    </header>
    <article role="main" class="Page-Content">
      <div class="LiquidLayout">
        <div class="Main LiquidLayout-Content">
          <header><h1 class="Heading" id="отображение-в-потоке"><a class="Anchor" aria-hidden="true" href="#отображение-в-потоке"></a><span class="ss01 hang-xs">О</span>тоб­ра­же­ние в по­то­ке</h1>
          </header>
<p><img src="the-flow-of-display.jpg" width="756" height="382" alt="Как же собрать этот пазл?"></p>
<p>В <abbr>CSS</abbr> есть мно­же­ство ню­ан­сов. Ино­гда ты смот­ришь на код и ду­ма­ешь: «По­че­му это во­об­ще ра­бо­та­ет?!», и, чем опыт­нее ты ста­но­вишь­ся, тем реже это про­ис­хо­дит. Но всё ещё ино­гда про­ис­ходит.</p>
<p>Несколь­ко дней на­зад мои кол­ле­ги на­шли ре­ше­ние од­ной про­бле­мы, но не смог­ли по­нять <em>по­че­му</em> оно ра­бо­та­ет, так что они по­ка­за­ли его мне. Но и я не смог схо­ду разо­брать­ся. Толь­ко спу­стя несколь­ко ми­нут раз­мыш­ле­ний над ко­дом я по­нял в чём же за­клю­ча­ет­ся ре­ше­ние. Это ока­за­лось тем, что я и так, ока­зы­ва­ет­ся, знал, но при­ме­нён­ное в до­воль­но необыч­ном кон­тексте.</p>
<p>Итак, у меня есть для вас неболь­шая за­дач­ка, ре­ше­ние для ко­то­рой я при­ве­ду поз­же в этой ста­тье: у вас есть два оди­на­ко­вых <abbr>HTML</abbr>-эле­мен­та с прак­ти­че­ски оди­на­ко­вым <abbr>CSS</abbr>. Оба эле­мен­та име­ют <code>float:left</code>. Един­ствен­ная вещь, ко­то­рая раз­ли­ча­ет­ся<span class="nobr"> —</span><span class="thinsp"> </span>один из эле­мен­тов име­ет <code>dis­play:in­line-block</code>, а дру­гой<span class="nobr"> —</span><span class="thinsp"> </span><code>dis­play:block</code>.</p>
<p>Во­прос: ка­кие долж­ны быть усло­вия, что­бы в этом слу­чае была раз­ни­ца в том, ка­кое зна­че­ние <code>dis­play</code> (<code>in­line-block</code> или <code>block</code>) к ним при­ме­ня­ется?</p>
<p>В по­ис­ках та­ко­го усло­вия мож­но до­бав­лять лю­бой <abbr>CSS</abbr> к этим эле­мен­там, лю­бой <abbr>HTML</abbr> кон­текст, глав­ное, что­бы всё это было оди­на­ко­вым для обо­их эле­мен­тов, и, по­нят­ное дело, нель­зя пе­ре­опре­де­лять свой­ства <code>float</code> и <code>dis­play</code>.</p>
<p>Со­ве­тую по­ду­мать над этим во­про­сом (и по­экс­пе­ри­мен­ти­ро­вать с ко­дом) пе­ред тем, как чи­тать про­дол­же­ние ста­тьи, за­дач­ка того стоит.</p>
<h2 class="Heading" id="closer-to-the-answer"><a class="Anchor" aria-hidden="true" href="#closer-to-the-answer"></a><span class="ss01 hang-m">Б</span>лиже к от­вету</h2>
<p>За­бав­но, что это по­ве­де­ние мож­но ис­поль­зо­вать в ре­аль­ном коде, а не толь­ко в ка­че­стве го­ло­во­лом­ки. Соб­ствен­но, имен­но на ре­аль­ном при­ме­ре я с этим и столк­нул­ся<span class="nobr"> —</span><span class="thinsp"> </span>как с одим из воз­мож­ных ре­ше­ний до­воль­но непро­стой за­дачки.</p>
<p>Ис­ход­ная за­да­ча за­клю­ча­лась в том, что­бы в кон­це од­но­строч­но­го спис­ка эле­мен­тов рас­по­ло­жить ещё один эле­мент так, что­бы он на­хо­дил­ся вплот­ную к осталь­ным, при этом ко­ли­че­ство эле­мен­тов до него ва­рьи­ро­ва­лось бы как в за­ви­си­мо­сти от и их ши­ри­ны, так и от ши­ри­ны ро­ди­теля.</p>
<p>Един­ствен­ное ре­ше­ние, ко­то­рое мы в ито­ге на­шли, ра­бо­та­ет при до­пу­ще­нии, что ши­ри­на по­след­не­го эле­мен­та фик­си­ро­ван­ная<span class="nobr"> —</span><span class="thinsp"> </span>но для на­шей за­да­чи это­го было до­ста­точно.</p>
<p>Соб­ствен­но, вот жи­вой при­мер того, как ра­бо­та­ет опи­сы­ва­е­мый в этой ста­тье эф­фект, по­про­буй­те по­ме­нять ши­ри­ну бра­у­зе­ра, что­бы уви­деть что про­ис­хо­дит с эле­мен­та­ми списка.</p>
<div class="Demo Demo_injected Figure" id="Demo_the-flow-of-display1">

<style>
.just-some-items {
    overflow: hidden;

    height: 2em;
    padding-right: 2.4em;
    margin: 0;

    font-size: 2em;
    }
.just-some-item {
    float: left;

    margin-right: 0.5em;

    line-height: 2em;
    }
.just-some-item:last-child {
    position: absolute;

    display: inline-block;

    width: 2.4em;
    }
.just-some-item:before {
    display: none;
    }

</style>

<ul class="just-some-items">
    <li class="just-some-item">One</li>
    <li class="just-some-item">Two</li>
    <li class="just-some-item">Three</li>
    <li class="just-some-item">Four</li>
    <li class="just-some-item">Five</li>
    <li class="just-some-item">Six</li>
    <li class="just-some-item">Seven</li>
    <li class="just-some-item">Eight</li>
    <li class="just-some-item">Nine</li>
    <li class="just-some-item">Ten</li>
    <li class="just-some-item">Eleven</li>
    <li class="just-some-item">…last</li>
</ul>
</div>
<p>На са­мом деле тот эф­фект, что опи­сы­ва­ет­ся в ста­тье, мож­но за­ме­нить на чуть дру­гой код, но это бу­дет ме­нее ла­ко­нич­но и ин­те­ресно.</p>
<p>Неболь­шая по­след­няя под­сказ­ка пе­ред тем, как рас­крыть кар­ты: как мож­но от­ме­нить эф­фект свой­ства <code>float</code>, но оста­вить вли­я­ние свой­ства <code>dis­play</code>, от­лич­но­го от <code>none</code>?</p>
<p>Есть одно свой­ство, ко­то­рое мож­но до­ба­вить, и ко­то­рое сде­ла­ет всё то, что нам нуж­но. Это <code>po­si­tion</code>.</p>
<h2 class="Heading" id="the-flow"><a class="Anchor" aria-hidden="true" href="#the-flow"></a><span class="ss01 hang-m">П</span>оток</h2>
<p>А если точ­нее, то <code>po­si­tion:ab­solute</code><span class="nobr"> —</span><span class="thinsp"> </span>если до­ба­вить его к на­шим оди­на­ко­вым эле­мен­там, то этим мы от­ме­ним по­ве­де­ние <code>float</code>. И мно­гие раз­ра­бот­чи­ки ду­ма­ют, что аб­со­лют­ное по­зи­ци­о­ни­ро­ва­ние пол­но­стью от­ме­нит и по­ве­де­ние <code>dis­play</code>, но это не так.</p>
<p>В спе­ци­фи­ка­ци­ях <abbr>CSS</abbr> есть <a class="Link" href="#todolink">одно ин­те­рес­ное ме­сто</a>, ко­то­рое мож­но пе­ре­ве­сти при­мер­но так:</p>
<blockquote>
<p>wha­ha­ha­hahaha</p>
</blockquote>
<p>Это зна­чит, что если у эле­мен­та с <code>po­si­tion:ab­solute</code> нет за­дан­ных свойств <code>top</code>, <code>right</code>, <code>bot­tom</code> и <code>left</code>, то этот эле­мент бу­дет рас­по­ла­гать­ся в том по­то­ке, в ко­то­ром он бы на­хо­дил­ся без при­ме­не­ния по­зи­ци­о­ни­ро­ва­ния, и <code>dis­play</code> в этом слу­чае как раз вли­я­ет на то, ка­кой же это бу­дет поток.</p>
<p>Вот при­мер ра­бо­ты это­го по­ве­дения:</p>
<div class="Demo Demo_injected Demo_seamless" id="Demo_the-flow-of-display2">

<style>
.a {
    float: left;
    display: inline-block;
    }
.b {
    float: left;
    display: block;
    }
.a,
.b {
    position: absolute;
    }
</style>

<p>
  Hello
  <span class="a">A</span>
</p>
<p>
  Hello
  <span class="b">B</span>
</p>
</div>
<p><abbr>HTML</abbr> обо­их при­ме­ров оди­на­ков, за ис­клю­че­ни­ем классов:</p>
<pre><code class="language-html">&lt;p&gt;
  Hello
  &lt;span class=&quot;a&quot;&gt;A&lt;/​​span&gt;
&lt;/​​p&gt;
&lt;p&gt;
  Hello
  &lt;span class=&quot;b&quot;&gt;B&lt;/​​span&gt;
&lt;/​​p&gt;
</code></pre>
<p><abbr>CSS</abbr> для них такой:</p>
<pre><code class="language-css">.a {
    float: left;
    dis­play: in­line-block;
    }
.b {
    float: left;
    dis­play: block;
    }
.a,
.b {
    po­si­tion: ab­solute;
    }
</code></pre>
<p>Да, <code>float</code> тут не ну­жен, в этом слу­чае он ни­че­го не де­ла­ет, но он и не бу­дет от­ме­нять по­ве­де­ние <code>dis­play</code>. И, то­гда как оба эле­мен­та пол­но­стью оди­на­ко­вы и име­ют <code>po­si­tion:ab­solute</code>, <span class="nobr">из-за</span> зна­че­ний <code>dis­play</code> ре­зуль­тат раз­ли­ча­ется.</p>
<p>Чу­дес­но! По­ду­май­те о том, как одно свой­ство от­ме­ня­ет дру­гое, но с до­бав­ле­ни­ем тре­тье­го свой­ства пер­вое свой­ство от­ме­ня­ет­ся, а вто­рое на­чи­на­ет дей­ствовать.</p>
<h2 class="Heading" id="usage-example"><a class="Anchor" aria-hidden="true" href="#usage-example"></a><span class="ss01 hang-m">П</span>ри­мер ис­поль­зо­вания</h2>
<p>Те­перь я по­про­бую опи­сать по­че­му это по­ве­де­ние мо­жет быть по­лез­но для при­ме­ра со спис­ком выше.</p>
<p>На­пом­ню чего нам хо­те­лось до­стичь<span class="nobr"> —</span><span class="thinsp"> </span>по­след­ний эле­мент дол­жен все­гда быть ви­ди­мым и на­хо­дить­ся в кон­це спис­ка (вплот­ную к по­след­не­му эле­мен­ту<span class="nobr"> —</span><span class="thinsp"> </span>по­это­му тут не сра­бо­та­ет обыч­ный <code>float:right</code>), при том, что ши­ри­на спис­ка ди­на­ми­че­ски ме­ня­ет­ся: эле­мен­ты «спры­ги­ва­ют» за <code>over­flow</code> ко­гда им не хва­та­ет места.</p>
<p>Не са­мая про­стая за­дач­ка, при­чём я сам её схо­ду не смог быст­ро ре­шить, но, по край­ней мере, те­перь я знаю как это сде­лать и по­че­му это мож­но сде­лать имен­но так.</p>
<p><abbr>HTML</abbr> для это­го спис­ка: </p>
<pre><code class="language-html">&lt;ul class=&quot;just-some-items&quot;&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;One&lt;/​​li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Two&lt;/​​li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Three&lt;/​​li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Four&lt;/​​li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Five&lt;/​​li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Six&lt;/​​li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Seven&lt;/​​li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Eight&lt;/​​li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Nine&lt;/​​li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Ten&lt;/​​li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Eleven&lt;/​​li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;…last&lt;/​​li&gt;
&lt;/​​ul&gt;
</code></pre>
<p>А <abbr>CSS</abbr> та­ков (я остав­лю часть пре­зен­та­ци­он­ных сти­лей за рам­ка­ми):</p>
<pre><code class="language-css">.just-some-items {
    over­flow: hid­den;

    height: 2em;
    padding-right: 2.4em;
    mar­gin: 0;
    }
.just-some-item {
    float: left;

    mar­gin-right: 0.5em;

    line-height: 2em;
    }
.just-some-item:last-child {
    po­si­tion: ab­solute;

    dis­play: in­line-block;

    width: 2.4em;
    }
</code></pre>
<p>Даже зная, что про­ис­хо­дит внут­ри, ко­гда я уви­дел этот код в пер­вый раз, я не сра­зу в нём разо­брал­ся. А про­ис­хо­дит тут сле­ду­ющее:</p>
<ol>
<li><p>Все эле­мен­ты спис­ка фло­атят­ся, что, в об­<span class="nobr">щем-то</span>, обыч­но для по­доб­ных спис­ков. Важ­но, что тут нель­зя за­ме­нить <code>float</code> на <code>in­line-block</code>.</p>
</li>
<li><p>На­ли­чие фло­атов вы­но­сит все эле­мен­ты из обыч­но­го по­то­ка. Это зна­чит, что если мы ря­дом по­ло­жим ка­<span class="nobr">кой-ни</span>­будь эле­мент в обыч­ный по­ток, то все фло­аты бу­дут его об­те­кать слева.</p>
</li>
<li><p>Те­перь важ­но что­бы «ши­ри­на» на­ше­го по­след­не­го эле­мен­та была ну­ле­вой, и при этом он был бы в обыч­ном по­то­ке. В этом слу­чае он как раз и бу­дет все­гда оста­вать­ся на пер­вой «строч­ке» обыч­но­го по­то­ка, даже в тех слу­ча­ях, ко­гда фло­аты за­ни­ма­ют всё до­ступ­ное место.</p>
</li>
<li><p>Тут в игру всту­па­ет <code>po­si­tion:ab­solute</code>: он как раз и де­ла­ет ров­но то, что нам нуж­но<span class="nobr"> —</span><span class="thinsp"> </span>уби­ра­ет <code>float</code> с это­го эле­мен­та, воз­вра­щая его в обыч­ный по­ток, и не даёт эле­мен­ту за­ни­мать в сво­ём по­то­ке ка­кое-либо место.</p>
</li>
<li><p>Но так как ис­ход­ные эле­мен­ты<span class="nobr"> —</span><span class="thinsp"> </span><code>&lt;li&gt;</code>, то они из­на­чаль­но име­ют блоч­ное по­ве­де­ние, то­гда как нам нуж­но, что­бы по­след­ний эле­мент на­хо­дил­ся в строч­ном кон­тек­сте, ина­че он не бу­дет рас­по­ла­гат­сья на пра­виль­ном ме­сте. Тут мы и до­бав­ля­ем <code>dis­play:in­line-block</code> (и, на са­мом деле, до­ста­точ­но до­ба­вить лю­бое дру­гое зна­че­ние <code>dis­play</code>, де­ла­ю­щее его строч­ным). Те­перь наш эле­мент «ну­ле­вой ши­ри­ны» ста­но­вит­ся на пра­виль­ное ме­сто в обыч­ном по­токе.</p>
</li>
</ol>
<h2 class="Heading" id="заключение"><a class="Anchor" aria-hidden="true" href="#заключение"></a><span class="ss01 hang-xs">З</span>аклю­чение</h2>
<p>Эф­фект, опи­сы­ва­е­мый в ста­тье<span class="nobr"> —</span><span class="thinsp"> </span>имен­но то, за что я так люб­лю <abbr>CSS</abbr>. Раз­лич­ные свой­ства ра­бо­та­ют не толь­ко сами по себе, но и вза­и­мо­дей­ству­ют друг с дру­гом, по­рой в очень необыч­ных, стран­ных, неожи­дан­ных, но очень ин­те­рес­ных ком­би­на­циях.</p>
<p>Что­бы пол­но­стью по­нять и по­гру­зить­ся в <abbr>CSS</abbr>, важ­но и экс­пе­ри­мен­ти­ро­вать с ко­дом, и кон­суль­ти­ро­вать­ся со спе­ци­фи­ка­ци­я­ми в тех слу­ча­ях, ко­гда вы ви­ди­те, что ваши экс­пе­ри­мен­ты ра­бо­та­ют, но не зна­е­те по­че­му именно.</p>
<p>При та­ком под­хо­де вы узна­е­те и за­пом­ни­те мно­го но­во­го, и по­том, ко­гда встре­ти­те по­хо­жую слож­ную за­да­чу, смо­же­те со­брать ре­ше­ние из тех кус­ков паз­зла, что бу­дут у вас на руках.</p>

          <p class="Metadata Published">Написано как черновик, ещё не опубликовано.
          </p>
          <p class="Metadata ThanksTo">Спасибо <a class="Link" href="http://taerin.deviantart.com/">Fev</a> за иллюстрацию.
          </p>
          <aside class="Feedback">
            <p>Если вы заметили ошибку или хотите чем-то дополнить статью, вы всегда можете <a href="https://github.com/kizu/kizu.github.com/issues/new?title=%D0%9E%D1%82%D0%B7%D1%8B%D0%B2%20%D0%BD%D0%B0%20%C2%AB%D0%9E%D1%82%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B2%20%D0%BF%D0%BE%D1%82%D0%BE%D0%BA%D0%B5%C2%BB" class="Link">написать мне об этом</a>, или <a href="https://github.com/kizu/kizu.github.com/blob/source/src/documents/posts/drafts/(fun)-the-flow-of-display/index.ru.md" class="Link">поправить статью прямо на Гитхабе</a>.
            </p>
          </aside>
        </div>
      </div>
    </article>
    <footer class="Page-Footer">
      <div class="LiquidLayout">
        <div class="LiquidLayout-Content">
          <nav class="PrevNext">
          </nav>
          <p role="contentinfo" class="Page-Copy"><a href="/" class="Link Link_wrapper">© 2017 <span class="Link-Inner">Роман Комаров</span>. </a><a href="https://twitter.com/ki_zu" class="Link Link_wrapper"><span class="Link-Inner">Читайте меня в твиттере</span>!</a>
          </p>
        </div>
      </div>
    </footer>
    <script>var supportsWoff2=function(A){if(!("FontFace"in A)||"function"!=typeof A.FontFace)return!1;var t=new FontFace("t",'url( "data:application/font-woff2;base64,d09GMgABAAAAAADcAAoAAAAAAggAAACWAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABk4ALAoUNAE2AiQDCAsGAAQgBSAHIBtvAcieB3aD8wURQ+TZazbRE9HvF5vde4KCYGhiCgq/NKPF0i6UIsZynbP+Xi9Ng+XLbNlmNz/xIBBqq61FIQRJhC/+QA/08PJQJ3sK5TZFMlWzC/iK5GUN40psgqvxwBjBOg6JUSJ7ewyKE2AAaXZrfUB4v+hze37ugJ9d+DeYqiDwVgCawviwVFGnuttkLqIMGivmDg" ) format( "woff2" )',{});return t.load()["catch"](function(){}),"loading"==t.status||"loaded"==t.status}(this),h=document.getElementsByTagName("head")[0],link=document.createElement("link");link.href="/s/extras"+(supportsWoff2?"2":"")+".css",link.type="text/css",link.rel="stylesheet",h.appendChild(link);
    </script>
    <script src="/j/prism.js"></script>
    <script src="//mc.yandex.ru/metrika/watch.js"></script>
    <script type="text/javascript">
      //<![CDATA[
      (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter632758 = new Ya.Metrika({id:632758, clickmap:true, trackLinks:true, trackHash:true, webvisor:true}); } catch(e) {} }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f); } else { f(); } })(document, window, "yandex_metrika_callbacks");
      //]]>
    </script>
    <noscript><img src="//mc.yandex.ru/watch/632758" style="position:absolute; left:-9990px;" alt=""></noscript>
  </body>
</html>