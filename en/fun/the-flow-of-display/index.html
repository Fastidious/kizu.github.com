<!DOCTYPE html>
<html lang="en" class="Page Page_post Page_en without-sidebar">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>The flow of display</title>
    <link rel="alternate" type="application/atom+xml" title="Atom feed" href="http://feeds.feedburner.com/kizuruen">
    <link rel="alternate" hreflang="en" href="http://kizu.ru/en/fun/the-flow-of-display/">
    <link rel="alternate" hreflang="ru" href="http://kizu.ru/fun/the-flow-of-display/">
    <link rel="stylesheet" href="/s/style.css">
    <link rel="preload" href="/s/extras2.css" as="style" onload="this.rel='stylesheet'">
  </head>
  <body class="Page-Body">
    <header class="Page-Header">
      <div class="LiquidLayout">
        <div class="LiquidLayout-Content">
          <h1 class="Page-Title"><a href="/en/" class="Page-Title-Link">Roman Komarov</a>
          </h1>
          <ul class="Page-Languages">
            <li data-short="en" class="Page-Language is-current">in English
            </li>
            <li class="Page-Language"><a data-short="ru" href="/fun/the-flow-of-display/" class="Page-Language-Link">по-русски</a>
            </li>
          </ul>
        </div>
      </div>
    </header>
    <article role="main" class="Page-Content">
      <div class="LiquidLayout">
        <div class="Main LiquidLayout-Content">
          <header><h1 class="Heading" id="the-flow-of-display"><a class="Anchor" aria-hidden="true" href="#the-flow-of-display"></a><span class="ss01 hang-m">T</span>he flow of display</h1>
          </header>
<p><img src="the-flow-of-display.jpg" width="756" height="382" alt="How is this puzzle solved?"></p>
<p>There are a lot of sub­tle nu­ances in <abbr>CSS</abbr>. Some­times you look at the code and won­der “why is it work­ing at all?!”, and as more ex­pe­ri­enced you be­come, the less of­ten it happens.</p>
<p>A few days ago my col­legues found a so­lu­tion for one prob­lem, but they couldn&#39;t tell <em>why</em> is it work­ing, and showed me the code. I couldn&#39;t tell it from the start too, but af­ter a few min­utes with it, I found the an­swer, and it was some­thing I al­ready knew, but in a new context.</p>
<p>So, I have a small quiz for you, with an an­swer later in the ar­ti­cle: you have two el­e­ments with the same <abbr>HTML</abbr> con­text and the same <abbr>CSS</abbr>, ap­plied to them. Both of them have some ex­act styles with <code>float:left</code> in their <abbr>CSS</abbr>. And the only thing that is dif­fer­ent be­tween them is that one of those blocks have <code>dis­play:in­line-block</code> and the other one have <code>dis­play:block</code>.</p>
<p>Can you find out a case when the value of <code>dis­play</code> on a block with <code>float:left</code> in <abbr>CSS</abbr> would matter?</p>
<p>You can add any styles (ex­cept for <code>float</code> and <code>dis­play</code>, ob­vi­ously) for those el­e­ments, and any <abbr>HTML</abbr> con­text or in­ner el­e­ments, but, again, the same for both.</p>
<p>I&#39;d rec­om­mend you to think more about this and find out a so­lu­tion by your­self. There would be an an­swer later in this post, but I think it is a nice prob­lem to think on.</p>
<h2 class="Heading" id="closer-to-the-answer"><a class="Anchor" aria-hidden="true" href="#closer-to-the-answer"></a><span class="ss02 hang-xs">C</span>loser to the answer</h2>
<p>The nice thing is that the ef­fect that is hap­pen­ing there can be use­ful. That&#39;s where I stum­bled upon it in the first <span class="nobr">place —</span><span class="thinsp"> </span>in a so­lu­tion for one com­plex prob­lem (which my col­legues found out, not me!)</p>
<p>The goal is to have an el­e­ment in the end of the list that would go right af­ter the last item, while the num­ber of items should adapt to the avail­able width. The only draw­back of the above so­lu­tion is that it need the last el­e­ment to have fixed width, but it&#39;s not the point of the demo.</p>
<p>Here is a demo that uses the ef­fect, de­scribed in this ar­gi­cle, try to re­size your browser and then guess what and why hap­pens inside:</p>
<div class="Demo Demo_injected Figure" id="Demo_the-flow-of-display1">

<style>
.just-some-items {
    overflow: hidden;

    height: 2em;
    padding-right: 2.4em;
    margin: 0;

    font-size: 2em;
    }
.just-some-item {
    float: left;

    margin-right: 0.5em;

    line-height: 2em;
    }
.just-some-item:last-child {
    position: absolute;

    display: inline-block;

    width: 2.4em;
    }
.just-some-item:before {
    display: none;
    }

</style>

<ul class="just-some-items">
    <li class="just-some-item">One</li>
    <li class="just-some-item">Two</li>
    <li class="just-some-item">Three</li>
    <li class="just-some-item">Four</li>
    <li class="just-some-item">Five</li>
    <li class="just-some-item">Six</li>
    <li class="just-some-item">Seven</li>
    <li class="just-some-item">Eight</li>
    <li class="just-some-item">Nine</li>
    <li class="just-some-item">Ten</li>
    <li class="just-some-item">Eleven</li>
    <li class="just-some-item">…last</li>
</ul>
</div>
<p>Now I&#39;ll give you a hint: what could dis­able the ef­fect of the <code>float</code>, but still would have <code>dis­play</code> to have an ef­fect on an el­e­ment? There is one prop­erty you can add that would make all the dif­ference.</p>
<p>It is…</p>
<p>…wait for it…</p>
<p><code>po­si­tion: ab­solute</code>!</p>
<h2 class="Heading" id="the-flow"><a class="Anchor" aria-hidden="true" href="#the-flow"></a><span class="ss01 hang-m">T</span>he flow</h2>
<p>That&#39;s right, when we add <code>po­si­tion:ab­solute</code> for those el­e­ments, we&#39;re dis­abling the be­hav­iour of the <code>float</code>. And a lot of de­vel­op­ers would think that <code>po­si­tion:ab­solute</code> would dis­card the ef­fect of the <code>dis­play</code> as well… But it won&#39;t! At least, not com­pletely.</p>
<p>There is one in­ter­est­ing place in the <abbr>CSS</abbr> specs that comes into play:</p>
<blockquote>
<p>wha­ha­ha­hahaha</p>
</blockquote>
<p>This means that if our block with <code>po­si­tion:ab­solute</code> don&#39;t have the <code>top</code>, <code>right</code>, <code>bot­tom</code> or <code>left</code> set, it would be placed in the flow as if it wouldn&#39;t have <code>po­si­tion:ab­solute</code> and would be af­fected by its <code>dis­play</code>! And as the <code>float</code> is dis­carded, the <code>dis­play</code> mat­ters, and when it mat­ters is when our el­e­ments have some­thing be­fore them.</p>
<p>Look at this sim­ple ex­ample:</p>
<div class="Demo Demo_injected Demo_seamless" id="Demo_the-flow-of-display2">

<style>
.a {
    float: left;
    display: inline-block;
    }
.b {
    float: left;
    display: block;
    }
.a,
.b {
    position: absolute;
    }
</style>

<p>
  Hello
  <span class="a">A</span>
</p>
<p>
  Hello
  <span class="b">B</span>
</p>
</div>
<p>The <code>html</code> for those blocks is the same, with the only dif­fer­ence of the used classes:</p>
<pre><code class="undefinedHTML">&lt;p&gt;
  Hello
  &lt;span class=&quot;a&quot;&gt;A&lt;/span&gt;
&lt;/p&gt;
&lt;p&gt;
  Hello
  &lt;span class=&quot;b&quot;&gt;B&lt;/span&gt;
&lt;/p&gt;
</code></pre>
<p>And the <abbr>CSS</abbr> for them:</p>
<pre><code class="undefinedCSS">.a {
    float: left;
    display: inline-block;
    }
.b {
    float: left;
    display: block;
    }
.a,
.b {
    position: absolute;
    }
</code></pre>
<p>Yep, the <code>float</code> won&#39;t do any­thing there, and the dif­fer­ence in the flow are there be­cause of the dif­fer­ences in <code>dis­play</code>.</p>
<p>Won­der­ful! Think a bit about all this. Of course, the <code>float</code> is not needed there, but it was a nice dis­guise for the ef­fect, as it is dis­carded on ab­solute po­si­tion­ing, but the <code>dis­play</code> is not.</p>
<h2 class="Heading" id="the-use-case"><a class="Anchor" aria-hidden="true" href="#the-use-case"></a><span class="ss01 hang-m">T</span>he use case</h2>
<p>Now I&#39;ll try to ex­plain the case I shown above, I&#39;ll show you it once again (re­size your browser, blah blah):</p>
<div class="Demo Demo_injected Figure" id="Demo_the-flow-of-display1">

<style>
.just-some-items {
    overflow: hidden;

    height: 2em;
    padding-right: 2.4em;
    margin: 0;

    font-size: 2em;
    }
.just-some-item {
    float: left;

    margin-right: 0.5em;

    line-height: 2em;
    }
.just-some-item:last-child {
    position: absolute;

    display: inline-block;

    width: 2.4em;
    }
.just-some-item:before {
    display: none;
    }

</style>

<ul class="just-some-items">
    <li class="just-some-item">One</li>
    <li class="just-some-item">Two</li>
    <li class="just-some-item">Three</li>
    <li class="just-some-item">Four</li>
    <li class="just-some-item">Five</li>
    <li class="just-some-item">Six</li>
    <li class="just-some-item">Seven</li>
    <li class="just-some-item">Eight</li>
    <li class="just-some-item">Nine</li>
    <li class="just-some-item">Ten</li>
    <li class="just-some-item">Eleven</li>
    <li class="just-some-item">…last</li>
</ul>
</div>
<p>What hap­pens here (and what needed to be achieved) is that the last item from the list should be al­ways on the first line, go­ing af­ter all the other items which are wrapped if they don&#39;t have enought place for them.</p>
<p>That was not an easy task, and I&#39;m a bit ashamed that I didn&#39;t solve it by my­self, but hey, at least I know how (and why) we can do it now!</p>
<p>The <abbr>HTML</abbr> for those items is this:</p>
<pre><code class="undefinedHTML">&lt;ul class=&quot;just-some-items&quot;&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;One&lt;/li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Two&lt;/li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Three&lt;/li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Four&lt;/li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Five&lt;/li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Six&lt;/li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Seven&lt;/li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Eight&lt;/li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Nine&lt;/li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Ten&lt;/li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;Eleven&lt;/li&gt;
    &lt;li class=&quot;just-some-item&quot;&gt;…last&lt;/li&gt;
&lt;/ul&gt;
</code></pre>
<p>The <abbr>CSS</abbr> is this:</p>
<pre><code class="undefinedCSS">.just-some-items {
    overflow: hidden;

    height: 2em;
    padding-right: 2.4em;
    margin: 0;
    }
.just-some-item {
    float: left;

    margin-right: 0.5em;

    line-height: 2em;
    }
.just-some-item:last-child {
    position: absolute;

    display: inline-block;

    width: 2.4em;
    }
</code></pre>
<p>And even know­ing all the above stuff, the “Aha!” mo­ment was de­layed a bit for me. What hap­pens there is the fol­lowing:</p>
<ol>
<li>All the blocks are floated.</li>
<li>The last item have <code>po­si­tion: ab­solute</code>.</li>
<li>When we add the <code>dis­play:in­line-block</code> (or, ac­tu­ally, <code>dis­play:in­line</code>, or <code>dis­play:in­line-flex</code>), the ef­fect that was ex­plained above hap­pens. The last block is placed in the nor­mal flow, while all the other el­e­ments are floated, this makes this el­e­ment to be on the first line.</li>
</ol>
<p>Ac­tu­ally, we don&#39;t even need the <code>po­si­tion: ab­solute</code> there, we could have a nor­mal <code>in­line-block</code> here with the zero width and with­out the float, but as we want it to have an ac­tual width and paddings and what­ever, the <code>po­si­tion:ab­solute</code> is re­ally handy there.</p>

          <p class="Metadata Published">Wrote as a draft, not published yet.
          </p>
          <p class="Metadata ThanksTo">Thanks to <a class="Link" href="http://taerin.deviantart.com/">Fev</a> for the illustration.
          </p>
          <aside class="Feedback">
            <p>If you've spotted a typo or a mistake, or wish to add something on, you could either <a href="https://github.com/kizu/kizu.github.com/issues/new?title=Feedback%20for%20%E2%80%9CThe%20flow%20of%20display%E2%80%9D" class="Link">write me about this</a> or <a href="https://github.com/kizu/kizu.github.com/blob/source/src/documents/posts/drafts/(fun)-the-flow-of-display/index.en.md" class="Link">edit this article on Github</a>.
            </p>
          </aside>
        </div>
      </div>
    </article>
    <footer class="Page-Footer">
      <div class="LiquidLayout">
        <div class="LiquidLayout-Content">
          <nav class="PrevNext">
          </nav>
          <p role="contentinfo" class="Page-Copy"><a href="/en/" class="Link Link_wrapper">© 2017 <span class="Link-Inner">Roman Komarov</span>. </a><a href="https://twitter.com/kizmarh" class="Link Link_wrapper"><span class="Link-Inner">Follow me on twitter</span>!</a>
          </p>
        </div>
      </div>
    </footer>
    <script>var supportsWoff2=function(A){if(!("FontFace"in A)||"function"!=typeof A.FontFace)return!1;var t=new FontFace("t",'url( "data:application/font-woff2;base64,d09GMgABAAAAAADcAAoAAAAAAggAAACWAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABk4ALAoUNAE2AiQDCAsGAAQgBSAHIBtvAcieB3aD8wURQ+TZazbRE9HvF5vde4KCYGhiCgq/NKPF0i6UIsZynbP+Xi9Ng+XLbNlmNz/xIBBqq61FIQRJhC/+QA/08PJQJ3sK5TZFMlWzC/iK5GUN40psgqvxwBjBOg6JUSJ7ewyKE2AAaXZrfUB4v+hze37ugJ9d+DeYqiDwVgCawviwVFGnuttkLqIMGivmDg" ) format( "woff2" )',{});return t.load()["catch"](function(){}),"loading"==t.status||"loaded"==t.status}(this),h=document.getElementsByTagName("head")[0],link=document.createElement("link");link.href="/s/extras"+(supportsWoff2?"2":"")+".css",link.type="text/css",link.rel="stylesheet",h.appendChild(link);
    </script>
    <script src="/j/prism.js"></script>
    <script src="//mc.yandex.ru/metrika/watch.js"></script>
    <script type="text/javascript">
      //<![CDATA[
      (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter632758 = new Ya.Metrika({id:632758, clickmap:true, trackLinks:true, trackHash:true, webvisor:true}); } catch(e) {} }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f); } else { f(); } })(document, window, "yandex_metrika_callbacks");
      //]]>
    </script>
    <noscript><img src="//mc.yandex.ru/watch/632758" style="position:absolute; left:-9990px;" alt=""></noscript>
  </body>
</html>